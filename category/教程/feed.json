{
    "version": "https://jsonfeed.org/version/1",
    "title": "æ²¡ç”¨çš„åšå®¢ â€¢ All posts by \"æ•™ç¨‹\" category",
    "description": "æ²¡æœ‰ä¸€ç‚¹ç”¨å¤„çš„åšå®¢!ğŸ˜ğŸ˜´ğŸ˜ª",
    "home_page_url": "https://blog.tianjiaji.dedyn.io",
    "items": [
        {
            "id": "https://blog.tianjiaji.dedyn.io/2024/04/13/DNS/undefined/undefined.html",
            "url": "https://blog.tianjiaji.dedyn.io/2024/04/13/DNS/undefined/undefined.html",
            "title": "DNS æœåŠ¡",
            "date_published": "2024-04-12T19:29:25.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><center><font size=\"6\"><b>DNS æœåŠ¡</b></font></center>\n\n<hr>\n<h1 id=\"é¢˜ç›®\"><a href=\"#é¢˜ç›®\" class=\"headerlink\" title=\"é¢˜ç›®\"></a>é¢˜ç›®</h1><p>1ï¼DNSæœåŠ¡<br>ä»»åŠ¡æè¿°ï¼šåˆ›å»ºDNSæœåŠ¡å™¨ï¼Œå®ç°ä¼ä¸šåŸŸåè®¿é—®ã€‚</p>\n<ol>\n<li>æ‰€æœ‰linuxä¸»æœºå¯ç”¨é˜²ç«å¢™ï¼Œé˜²ç«å¢™åŒºåŸŸä¸º publicï¼Œåœ¨é˜²ç«å¢™ä¸­æ”¾è¡Œå¯¹åº”æœåŠ¡ç«¯å£ã€‚</li>\n<li>åˆ©ç”¨chronyï¼Œé…ç½®linux1ä¸ºå…¶ä»–linuxä¸»æœºæä¾›NTPæœåŠ¡ã€‚</li>\n<li>æ‰€æœ‰ linuxä¸»æœºä¹‹é—´ (åŒ…å«æœ¬ä¸»æœº )rootç”¨æˆ·å®ç°å¯†é’¥sshè®¤è¯ï¼Œç¦ç”¨å¯†ç è®¤è¯ã€‚</li>\n<li>åˆ©ç”¨bindï¼Œé…ç½®linux1ä¸ºä¸»DNSæœåŠ¡å™¨ï¼Œlinux2ä¸ºå¤‡ç”¨DNSæœåŠ¡å™¨ã€‚ä¸ºæ‰€æœ‰linuxä¸»æœºæä¾›å†—ä½™DNSæ­£åå‘è§£ææœåŠ¡ã€‚</li>\n</ol>\n<hr>\n<h1 id=\"ç¬¬ä¸€å°é¢˜\"><a href=\"#ç¬¬ä¸€å°é¢˜\" class=\"headerlink\" title=\"ç¬¬ä¸€å°é¢˜\"></a>ç¬¬ä¸€å°é¢˜</h1><p>é¢˜ç›®ï¼š</p>\n<ol>\n<li>æ‰€æœ‰linuxä¸»æœºå¯ç”¨é˜²ç«å¢™ï¼Œé˜²ç«å¢™åŒºåŸŸä¸º publicï¼Œåœ¨é˜²ç«å¢™ä¸­æ”¾è¡Œå¯¹åº”æœåŠ¡ç«¯å£ã€‚</li>\n</ol>\n<hr>\n<h2 id=\"æ”¾è¡Œç›¸åº”ç«¯å£\"><a href=\"#æ”¾è¡Œç›¸åº”ç«¯å£\" class=\"headerlink\" title=\"æ”¾è¡Œç›¸åº”ç«¯å£\"></a>æ”¾è¡Œç›¸åº”ç«¯å£</h2><p>æ·»åŠ ç«¯å£</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --permanent --zone=public --add-port=53/tcp --add-port=&#123;123,53&#125;/udp</span><br></pre></td></tr></table></figure>\n<p><font color=\"red\"><b>æ³¨æ„ï¼šå¼€æ”¾é˜²ç«å¢™çš„å‘½ä»¤éœ€è¦è¾“å…¥è‡³å…¨éƒ¨ä¸»æœº!</b></font></p>\n<p>ç«¯å£è¯¦æƒ…ï¼š</p>\n<ol>\n<li><p>53&#x2F;UDPï¼šä¸»è¦ç”¨é€”ï¼šDNSæŸ¥è¯¢çš„é»˜è®¤ä¼ è¾“æ–¹å¼ã€‚å¤§éƒ¨åˆ†å¸¸è§„çš„ã€éé€’å½’çš„ã€è¾ƒå°çš„DNSæŸ¥è¯¢ï¼ˆå¦‚å®¢æˆ·ç«¯å‘DNSæœåŠ¡å™¨æŸ¥è¯¢åŸŸåå¯¹åº”çš„IPåœ°å€ï¼‰é€šå¸¸é€šè¿‡UDPåè®®è¿›è¡Œã€‚</p>\n</li>\n<li><p>53&#x2F;TCPï¼šä¸»è¦ç”¨é€”ï¼šåŒºåŸŸä¼ è¾“ï¼ˆZone Transferï¼ŒAXFR&#x2F;IXFRï¼‰ï¼šDNSä¸»æœåŠ¡å™¨ä¸è¾…åŠ©æœåŠ¡å™¨ä¹‹é—´åŒæ­¥æ•´ä¸ªæˆ–éƒ¨åˆ†DNSåŒºåŸŸæ•°æ®æ—¶ï¼Œç”±äºæ•°æ®é‡å¯èƒ½è¾ƒå¤§ï¼Œä¸”å¿…é¡»ä¿è¯æ•°æ®å®Œæ•´æ€§ï¼Œé€šå¸¸é‡‡ç”¨TCPåè®®ã€‚</p>\n</li>\n<li><p>Chronyä½œä¸ºNTPï¼ˆNetwork Time Protocolï¼‰æœåŠ¡è½¯ä»¶ï¼Œä¸ä¼ ç»Ÿçš„NTPæœåŠ¡ä¸€æ ·ï¼Œä½¿ç”¨ç«¯å£123&#x2F;UDPè¿›è¡Œæ—¶é—´åŒæ­¥é€šä¿¡ã€‚</p>\n</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">é‡æ–°åŠ è½½é˜²ç«å¢™é…ç½®</span></span><br><span class=\"line\">firewall-cmd --reload </span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"ç¬¬äºŒå°é¢˜\"><a href=\"#ç¬¬äºŒå°é¢˜\" class=\"headerlink\" title=\"ç¬¬äºŒå°é¢˜\"></a>ç¬¬äºŒå°é¢˜</h1><p>é¢˜ç›®ï¼š<br>2. åˆ©ç”¨chronyï¼Œé…ç½®linux1ä¸ºå…¶ä»–linuxä¸»æœºæä¾›NTPæœåŠ¡ã€‚</p>\n<hr>\n<h2 id=\"1-é…ç½®-Linux1-chrony-confæ–‡ä»¶\"><a href=\"#1-é…ç½®-Linux1-chrony-confæ–‡ä»¶\" class=\"headerlink\" title=\"1. é…ç½® Linux1 chrony.confæ–‡ä»¶\"></a>1. é…ç½® Linux1 chrony.confæ–‡ä»¶</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">æ‰“å¼€chronyé…ç½®æ–‡ä»¶è¿›è¡Œç¼–è¾‘</span></span><br><span class=\"line\">vim /etc/chrony.conf</span><br></pre></td></tr></table></figure>\n\n<p>å¤§çº¦ç¬¬ä¸‰è¡Œ</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pool 2.rocky.pool.ntp.org iburst</span><br></pre></td></tr></table></figure>\n\n<p>æ”¹ä¸º â†“</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#pool 2.rocky.pool.ntp.org iburst</span><br><span class=\"line\">server 10.10.220.101 iburst</span><br></pre></td></tr></table></figure>\n\n<p>å¤§çº¦ç¬¬28è¡Œæ·»åŠ æ­¤è¡Œ â†“</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">allow 10.10.220.0/24</span><br></pre></td></tr></table></figure>\n\n<p>å¤§çº¦çš„31è¡Œå–æ¶ˆæ³¨é‡Š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">local stratum 10</span><br></pre></td></tr></table></figure>\n<p>é€€å‡ºä¿å­˜</p>\n<p>é‡å¯chronyæœåŠ¡</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart chronyd</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"2-é…ç½®-å‰©ä¸‹ä¸»æœºçš„-chrony-confæ–‡ä»¶\"><a href=\"#2-é…ç½®-å‰©ä¸‹ä¸»æœºçš„-chrony-confæ–‡ä»¶\" class=\"headerlink\" title=\"2. é…ç½® å‰©ä¸‹ä¸»æœºçš„ chrony.confæ–‡ä»¶\"></a>2. é…ç½® å‰©ä¸‹ä¸»æœºçš„ chrony.confæ–‡ä»¶</h2><p><font color=\"red\"><b>æ³¨æ„ï¼šä»¥ä¸‹é…ç½®å¿…é¡»è¾“å…¥åˆ°å‰©ä¸‹çš„ä¸»æœºä¸­ï¼</b></font></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">æ‰“å¼€chronyé…ç½®æ–‡ä»¶è¿›è¡Œç¼–è¾‘</span></span><br><span class=\"line\">vim /etc/chrony.conf</span><br></pre></td></tr></table></figure>\n\n<p>å¤§çº¦ç¬¬ä¸‰è¡Œ</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pool 2.rocky.pool.ntp.org iburst</span><br></pre></td></tr></table></figure>\n\n<p>æ”¹ä¸º â†“</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#pool 2.rocky.pool.ntp.org iburst</span><br><span class=\"line\">server 10.10.220.101 iburst</span><br></pre></td></tr></table></figure>\n\n<p>é€€å‡ºä¿å­˜</p>\n<p>é‡å¯chronyæœåŠ¡</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart chronyd</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"ç¬¬ä¸‰å°é¢˜\"><a href=\"#ç¬¬ä¸‰å°é¢˜\" class=\"headerlink\" title=\"ç¬¬ä¸‰å°é¢˜\"></a>ç¬¬ä¸‰å°é¢˜</h1><p>é¢˜ç›®ï¼š<br>3. æ‰€æœ‰ linuxä¸»æœºä¹‹é—´ (åŒ…å«æœ¬ä¸»æœº )rootç”¨æˆ·å®ç°å¯†é’¥sshè®¤è¯ï¼Œç¦ç”¨å¯†ç è®¤è¯ã€‚</p>\n<hr>\n<h2 id=\"1-ç”Ÿæˆæ‰€æœ‰ä¸»æœºçš„SSHå¯†é’¥\"><a href=\"#1-ç”Ÿæˆæ‰€æœ‰ä¸»æœºçš„SSHå¯†é’¥\" class=\"headerlink\" title=\"1. ç”Ÿæˆæ‰€æœ‰ä¸»æœºçš„SSHå¯†é’¥\"></a>1. ç”Ÿæˆæ‰€æœ‰ä¸»æœºçš„SSHå¯†é’¥</h2><p><font color=\"red\"><b>å°†ä»¥ä¸‹å‘½ä»¤è¾“å…¥åˆ°æ‰€æœ‰çš„ä¸»æœºä¸­ï¼ï¼</b></font></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen</span><br></pre></td></tr></table></figure>\n<p>ç„¶åä¸€è·¯å›è½¦åˆ°åº•</p>\n<h2 id=\"2-å°†æ‰€æœ‰ä¸»æœºçš„å…¬é’¥å‘é€è‡³Linux1\"><a href=\"#2-å°†æ‰€æœ‰ä¸»æœºçš„å…¬é’¥å‘é€è‡³Linux1\" class=\"headerlink\" title=\"2. å°†æ‰€æœ‰ä¸»æœºçš„å…¬é’¥å‘é€è‡³Linux1\"></a>2. å°†æ‰€æœ‰ä¸»æœºçš„å…¬é’¥å‘é€è‡³Linux1</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux1 ~]# ssh-copy-id 10.10.220.101   # è¾“å…¥è‡³ Linux1ï¼Œæ²¡é”™ä½ æ²¡çœ‹é”™è¿™å°ä¸»æœºä¹Ÿè¦è¾“å…¥</span><br><span class=\"line\">[root@linux2 ~]# ssh-copy-id 10.10.220.101   # è¾“å…¥è‡³ Linux2</span><br><span class=\"line\">[root@linux3 ~]# ssh-copy-id 10.10.220.101   # è¾“å…¥è‡³ Linux3</span><br><span class=\"line\">[root@linux4 ~]# ssh-copy-id 10.10.220.101   # è¾“å…¥è‡³ Linux4</span><br></pre></td></tr></table></figure>\n<p>ç„¶åè¾“å…¥yeså’Œå¯†ç å°±å¯ä»¥äº†</p>\n<h2 id=\"3-å°†-authorized-keys-æ–‡ä»¶å‘é€è‡³å…¶ä»–ä¸»æœº\"><a href=\"#3-å°†-authorized-keys-æ–‡ä»¶å‘é€è‡³å…¶ä»–ä¸»æœº\" class=\"headerlink\" title=\"3. å°† authorized_keys æ–‡ä»¶å‘é€è‡³å…¶ä»–ä¸»æœº\"></a>3. å°† authorized_keys æ–‡ä»¶å‘é€è‡³å…¶ä»–ä¸»æœº</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">for i in &#123;1..4&#125;;do scp /root/.ssh/authorized_keys 10.10.220.$i:/root/.ssh/authorized_keys;done</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-å…³é—­å¯†ç è®¤è¯\"><a href=\"#4-å…³é—­å¯†ç è®¤è¯\" class=\"headerlink\" title=\"4. å…³é—­å¯†ç è®¤è¯\"></a>4. å…³é—­å¯†ç è®¤è¯</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>\n<p>æ‰¾åˆ°å¦‚ä¸‹é…ç½®ï¼Œå¤§çº¦åœ¨65è¡Œå·¦å³</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#PasswordAuthentication yes</span><br></pre></td></tr></table></figure>\n<p>ä¿®æ”¹ä¸º â†“</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PasswordAuthentication no</span><br></pre></td></tr></table></figure>\n<p>é€€å‡ºä¿å­˜</p>\n<h2 id=\"5-é‡å¯sshdæœåŠ¡\"><a href=\"#5-é‡å¯sshdæœåŠ¡\" class=\"headerlink\" title=\"5. é‡å¯sshdæœåŠ¡\"></a>5. é‡å¯sshdæœåŠ¡</h2><p><font color=\"red\"><b>æ³¨æ„ï¼šæ‰€æœ‰ä¸»æœºéƒ½è¦é‡å¯sshdæœåŠ¡ï¼</b></font></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart sshd</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h1 id=\"ç¬¬å››å°é¢˜\"><a href=\"#ç¬¬å››å°é¢˜\" class=\"headerlink\" title=\"ç¬¬å››å°é¢˜\"></a>ç¬¬å››å°é¢˜</h1><p>é¢˜ç›®ï¼š<br>4. åˆ©ç”¨bindï¼Œé…ç½®linux1ä¸ºä¸»DNSæœåŠ¡å™¨ï¼Œlinux2ä¸ºå¤‡ç”¨DNSæœåŠ¡å™¨ã€‚ä¸ºæ‰€æœ‰linuxä¸»æœºæä¾›å†—ä½™DNSæ­£åå‘è§£ææœåŠ¡ã€‚</p>\n<hr>\n<h2 id=\"ä¸»DNSæœåŠ¡å™¨\"><a href=\"#ä¸»DNSæœåŠ¡å™¨\" class=\"headerlink\" title=\"ä¸»DNSæœåŠ¡å™¨\"></a>ä¸»DNSæœåŠ¡å™¨</h2><h3 id=\"1-ä¸º-Linux1-å®‰è£…-bind\"><a href=\"#1-ä¸º-Linux1-å®‰è£…-bind\" class=\"headerlink\" title=\"1. ä¸º Linux1 å®‰è£… bind\"></a>1. ä¸º Linux1 å®‰è£… bind</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux1 ~]# yum install bind* -y</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-é…ç½®-Linux1-çš„named-confæ–‡ä»¶\"><a href=\"#2-é…ç½®-Linux1-çš„named-confæ–‡ä»¶\" class=\"headerlink\" title=\"2. é…ç½® Linux1 çš„named.confæ–‡ä»¶\"></a>2. é…ç½® Linux1 çš„named.confæ–‡ä»¶</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/named.conf     # DNSä¸»é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//</span><br><span class=\"line\">// named.conf</span><br><span class=\"line\">//</span><br><span class=\"line\">// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS</span><br><span class=\"line\">// server as a caching only nameserver (as a localhost DNS resolver only).</span><br><span class=\"line\">//</span><br><span class=\"line\">// See /usr/share/doc/bind*/sample/ for example named configuration files.</span><br><span class=\"line\">//</span><br><span class=\"line\"></span><br><span class=\"line\">options &#123;</span><br><span class=\"line\">        listen-on port 53 &#123; 127.0.0.1; &#125;;</span><br><span class=\"line\">        listen-on-v6 port 53 &#123; ::1; &#125;;</span><br><span class=\"line\">        directory       &quot;/var/named&quot;;</span><br><span class=\"line\">        dump-file       &quot;/var/named/data/cache_dump.db&quot;;</span><br><span class=\"line\">        statistics-file &quot;/var/named/data/named_stats.txt&quot;;</span><br><span class=\"line\">        memstatistics-file &quot;/var/named/data/named_mem_stats.txt&quot;;</span><br><span class=\"line\">        secroots-file   &quot;/var/named/data/named.secroots&quot;;</span><br><span class=\"line\">        recursing-file  &quot;/var/named/data/named.recursing&quot;;</span><br><span class=\"line\">        allow-query     &#123; localhost; &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        /* </span><br><span class=\"line\">         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.</span><br><span class=\"line\">         - If you are building a RECURSIVE (caching) DNS server, you need to enable </span><br><span class=\"line\">           recursion. </span><br><span class=\"line\">         - If your recursive DNS server has a public IP address, you MUST enable access </span><br><span class=\"line\">           control to limit queries to your legitimate users. Failing to do so will</span><br><span class=\"line\">           cause your server to become part of large scale DNS amplification </span><br><span class=\"line\">           attacks. Implementing BCP38 within your network would greatly</span><br><span class=\"line\">           reduce such attack surface </span><br><span class=\"line\">        */</span><br><span class=\"line\">        recursion yes;</span><br></pre></td></tr></table></figure>\n\n<p>è¯·æ‰¾åˆ°å¦‚ä¸‹é…ç½®å¹¶ä¿®æ”¹ä¸º â†“</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//</span><br><span class=\"line\">// named.conf</span><br><span class=\"line\">//</span><br><span class=\"line\">// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS</span><br><span class=\"line\">// server as a caching only nameserver (as a localhost DNS resolver only).</span><br><span class=\"line\">//</span><br><span class=\"line\">// See /usr/share/doc/bind*/sample/ for example named configuration files.</span><br><span class=\"line\">//</span><br><span class=\"line\"></span><br><span class=\"line\">options &#123;</span><br><span class=\"line\">        listen-on port 53 &#123; 10.10.220.101; &#125;;   # Linux1çš„IPåœ°å€</span><br><span class=\"line\">        listen-on-v6 port 53 &#123; ::1; &#125;;</span><br><span class=\"line\">        directory       &quot;/var/named&quot;;</span><br><span class=\"line\">        dump-file       &quot;/var/named/data/cache_dump.db&quot;;</span><br><span class=\"line\">        statistics-file &quot;/var/named/data/named_stats.txt&quot;;</span><br><span class=\"line\">        memstatistics-file &quot;/var/named/data/named_mem_stats.txt&quot;;</span><br><span class=\"line\">        secroots-file   &quot;/var/named/data/named.secroots&quot;;</span><br><span class=\"line\">        recursing-file  &quot;/var/named/data/named.recursing&quot;;</span><br><span class=\"line\">        allow-query     &#123; any; &#125;;       # å…è®¸ä»»ä½•IPè®¿é—®</span><br><span class=\"line\">        allow-transfer  &#123; 10.10.220.102; &#125;; # å…è®¸10.10.220.102çš„IPè®¿é—®</span><br><span class=\"line\"></span><br><span class=\"line\">        /* </span><br><span class=\"line\">         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.</span><br><span class=\"line\">         - If you are building a RECURSIVE (caching) DNS server, you need to enable </span><br><span class=\"line\">           recursion. </span><br><span class=\"line\">         - If your recursive DNS server has a public IP address, you MUST enable access </span><br><span class=\"line\">           control to limit queries to your legitimate users. Failing to do so will</span><br><span class=\"line\">           cause your server to become part of large scale DNS amplification </span><br><span class=\"line\">           attacks. Implementing BCP38 within your network would greatly</span><br><span class=\"line\">           reduce such attack surface </span><br><span class=\"line\">        */</span><br><span class=\"line\">        recursion yes;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-é…ç½®-Linux1-çš„-named-rfc1912-zones-åŒºåŸŸæ–‡ä»¶\"><a href=\"#3-é…ç½®-Linux1-çš„-named-rfc1912-zones-åŒºåŸŸæ–‡ä»¶\" class=\"headerlink\" title=\"3. é…ç½® Linux1 çš„ named.rfc1912.zones  åŒºåŸŸæ–‡ä»¶\"></a>3. é…ç½® Linux1 çš„ named.rfc1912.zones  åŒºåŸŸæ–‡ä»¶</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/named.rfc1912.zones </span><br></pre></td></tr></table></figure>\n\n<p>åœ¨æœ€åæ·»åŠ å¦‚ä¸‹å†…å®¹</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zone &quot;skills.lan&quot; IN &#123;</span><br><span class=\"line\">        type master;</span><br><span class=\"line\">        file &quot;zxpy&quot;;</span><br><span class=\"line\">        allow-update &#123; none; &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">zone &quot;220.10.10.in-addr.arpa&quot; IN &#123;</span><br><span class=\"line\">        type master;</span><br><span class=\"line\">        file &quot;fxpy&quot;;</span><br><span class=\"line\">        allow-update &#123; none; &#125;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>é€€å‡ºä¿å­˜</p>\n<h3 id=\"4-é…ç½®-Linux1-çš„æ­£åå‘è§£ææ–‡ä»¶\"><a href=\"#4-é…ç½®-Linux1-çš„æ­£åå‘è§£ææ–‡ä»¶\" class=\"headerlink\" title=\"4. é…ç½® Linux1 çš„æ­£åå‘è§£ææ–‡ä»¶\"></a>4. é…ç½® Linux1 çš„æ­£åå‘è§£ææ–‡ä»¶</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp -p named.localhost zxpy  # å¤åˆ¶æ­£å‘è§£ææ¨¡æ¿æ–‡ä»¶ </span><br><span class=\"line\">cp -p named.loopback fxpy   # å¤åˆ¶åå‘è§£ææ¨¡æ¿æ–‡ä»¶</span><br></pre></td></tr></table></figure>\n<p><font color=\"red\"><b>æ³¨æ„ï¼šå¤åˆ¶æ–‡ä»¶æ—¶ï¼Œä¸€å®šè¦åŠ ä¸Šå‚æ•° -P å¦åˆ™DNSæœåŠ¡æ— æ³•è¯»å–æ­¤é…ç½®æ–‡ä»¶</b></font></p>\n<p>è¯¦ç»†ï¼š<br>è¿™é‡Œcp -pæ˜¯ä¸€ä¸ªUnix&#x2F;Linuxç³»ç»Ÿä¸­çš„å‘½ä»¤ï¼Œç”¨äºå¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•ï¼Œå…¶ä¸­-pè¡¨ç¤ºä¿ç•™åŸæœ‰æ–‡ä»¶çš„æƒé™å±æ€§ã€‚è¿™æ¡å‘½ä»¤çš„ç›®çš„æ˜¯å°†åå‘è§£ææ¨¡æ¿æ–‡ä»¶åº”ç”¨åˆ°fxpyç›®å½•ä¸­ï¼Œå¯èƒ½æ˜¯ä¸ºäº†é…ç½®æˆ–ä½¿ç”¨è¯¥æ¨¡æ¿è¿›è¡Œè¿›ä¸€æ­¥çš„ç½‘ç»œè§£ææ“ä½œã€‚</p>\n<h3 id=\"5-ä¿®æ”¹-Linux1-çš„-zxpy-é…ç½®æ–‡ä»¶\"><a href=\"#5-ä¿®æ”¹-Linux1-çš„-zxpy-é…ç½®æ–‡ä»¶\" class=\"headerlink\" title=\"5. ä¿®æ”¹ Linux1 çš„ zxpy é…ç½®æ–‡ä»¶\"></a>5. ä¿®æ”¹ Linux1 çš„ zxpy é…ç½®æ–‡ä»¶</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim zxpy</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$TTL 1D</span><br><span class=\"line\">@       IN SOA  @ rname.invalid. (</span><br><span class=\"line\">                                        0       ; serial</span><br><span class=\"line\">                                        1D      ; refresh</span><br><span class=\"line\">                                        1H      ; retry</span><br><span class=\"line\">                                        1W      ; expire</span><br><span class=\"line\">                                        3H )    ; minimum</span><br><span class=\"line\">        NS      @</span><br><span class=\"line\">        A       127.0.0.1</span><br><span class=\"line\">        AAAA    ::1</span><br></pre></td></tr></table></figure>\n\n<p>ä¿®æ”¹ä¸º â†“</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$TTL 1D</span><br><span class=\"line\">@       IN SOA  @ linux1.skills.lan. (      # æ­¤å¤„ä¿®æ”¹ä¸ºè¿™å°ä¸»æœºçš„å®Œæ•´åŸŸå</span><br><span class=\"line\">                                        0       ; serial</span><br><span class=\"line\">                                        1D      ; refresh</span><br><span class=\"line\">                                        1H      ; retry</span><br><span class=\"line\">                                        1W      ; expire</span><br><span class=\"line\">                                        3H )    ; minimum</span><br><span class=\"line\">        NS      @</span><br><span class=\"line\">        A       10.10.220.101</span><br><span class=\"line\">        AAAA    ::1</span><br><span class=\"line\">linux1  A       10.10.220.101</span><br><span class=\"line\">linux2  A       10.10.220.102</span><br><span class=\"line\">linux3  A       10.10.220.103</span><br><span class=\"line\">linux4  A       10.10.220.104</span><br><span class=\"line\">www     A       10.10.220.101</span><br><span class=\"line\">web     A       10.10.220.101</span><br><span class=\"line\">tomcat  A       10.10.220.102</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-ä¿®æ”¹-Linux1-çš„-fxpy-é…ç½®æ–‡ä»¶\"><a href=\"#6-ä¿®æ”¹-Linux1-çš„-fxpy-é…ç½®æ–‡ä»¶\" class=\"headerlink\" title=\"6. ä¿®æ”¹ Linux1 çš„ fxpy é…ç½®æ–‡ä»¶\"></a>6. ä¿®æ”¹ Linux1 çš„ fxpy é…ç½®æ–‡ä»¶</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim fxpy</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$TTL 1D</span><br><span class=\"line\">@       IN SOA  @ rname.invalid. (</span><br><span class=\"line\">                                        0       ; serial</span><br><span class=\"line\">                                        1D      ; refresh</span><br><span class=\"line\">                                        1H      ; retry</span><br><span class=\"line\">                                        1W      ; expire</span><br><span class=\"line\">                                        3H )    ; minimum</span><br><span class=\"line\">        NS      @</span><br><span class=\"line\">        A       127.0.0.1</span><br><span class=\"line\">        AAAA    ::1</span><br><span class=\"line\">        PTR     localhost.</span><br></pre></td></tr></table></figure>\n\n<p>ä¿®æ”¹ä¸º â†“</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$TTL 1D</span><br><span class=\"line\">@       IN SOA  @ linux1.skills.lan. (  # æ­¤å¤„ä¿®æ”¹ä¸ºè¿™å°ä¸»æœºçš„å®Œæ•´åŸŸå</span><br><span class=\"line\">                                        0       ; serial</span><br><span class=\"line\">                                        1D      ; refresh</span><br><span class=\"line\">                                        1H      ; retry</span><br><span class=\"line\">                                        1W      ; expire</span><br><span class=\"line\">                                        3H )    ; minimum</span><br><span class=\"line\">        NS      @</span><br><span class=\"line\">        A       127.0.0.1</span><br><span class=\"line\">        AAAA    ::1</span><br><span class=\"line\">        PTR     localhost.</span><br><span class=\"line\">101     PTR     linux1.skills.lan.</span><br><span class=\"line\">102     PTR     linux2.skills.lan.</span><br><span class=\"line\">103     PTR     linux3.skills.lan.</span><br><span class=\"line\">104     PTR     linux4.skills.lan.</span><br><span class=\"line\">101     PTR     www.skills.lan.</span><br><span class=\"line\">101     PTR     web.skills.lan.</span><br><span class=\"line\">102     PTR     tomcat.skills.lan.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-å¯åŠ¨-Linux1-çš„-DNS-æœåŠ¡\"><a href=\"#7-å¯åŠ¨-Linux1-çš„-DNS-æœåŠ¡\" class=\"headerlink\" title=\"7. å¯åŠ¨ Linux1 çš„ DNS æœåŠ¡\"></a>7. å¯åŠ¨ Linux1 çš„ DNS æœåŠ¡</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">åŠ å…¥å¼€æœºè‡ªå¯å¹¶ç«‹å³å¯åŠ¨ named æœåŠ¡</span></span><br><span class=\"line\">systemctl enable named --now</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å‰¯DNSæœåŠ¡å™¨\"><a href=\"#å‰¯DNSæœåŠ¡å™¨\" class=\"headerlink\" title=\"å‰¯DNSæœåŠ¡å™¨\"></a>å‰¯DNSæœåŠ¡å™¨</h2><h3 id=\"1-ä¸º-Linux2-å®‰è£…-bind\"><a href=\"#1-ä¸º-Linux2-å®‰è£…-bind\" class=\"headerlink\" title=\"1. ä¸º Linux2 å®‰è£… bind\"></a>1. ä¸º Linux2 å®‰è£… bind</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install bind* -y</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-é…ç½®-Linux2-çš„-named-conf\"><a href=\"#2-é…ç½®-Linux2-çš„-named-conf\" class=\"headerlink\" title=\"2. é…ç½® Linux2 çš„ named.conf\"></a>2. é…ç½® Linux2 çš„ named.conf</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/named.conf     # DNSä¸»é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//</span><br><span class=\"line\">// named.conf</span><br><span class=\"line\">//</span><br><span class=\"line\">// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS</span><br><span class=\"line\">// server as a caching only nameserver (as a localhost DNS resolver only).</span><br><span class=\"line\">//</span><br><span class=\"line\">// See /usr/share/doc/bind*/sample/ for example named configuration files.</span><br><span class=\"line\">//</span><br><span class=\"line\"></span><br><span class=\"line\">options &#123;</span><br><span class=\"line\">        listen-on port 53 &#123; 127.0.0.1; &#125;;</span><br><span class=\"line\">        listen-on-v6 port 53 &#123; ::1; &#125;;</span><br><span class=\"line\">        directory       &quot;/var/named&quot;;</span><br><span class=\"line\">        dump-file       &quot;/var/named/data/cache_dump.db&quot;;</span><br><span class=\"line\">        statistics-file &quot;/var/named/data/named_stats.txt&quot;;</span><br><span class=\"line\">        memstatistics-file &quot;/var/named/data/named_mem_stats.txt&quot;;</span><br><span class=\"line\">        secroots-file   &quot;/var/named/data/named.secroots&quot;;</span><br><span class=\"line\">        recursing-file  &quot;/var/named/data/named.recursing&quot;;</span><br><span class=\"line\">        allow-query     &#123; localhost; &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        /* </span><br><span class=\"line\">         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.</span><br><span class=\"line\">         - If you are building a RECURSIVE (caching) DNS server, you need to enable </span><br><span class=\"line\">           recursion. </span><br><span class=\"line\">         - If your recursive DNS server has a public IP address, you MUST enable access </span><br><span class=\"line\">           control to limit queries to your legitimate users. Failing to do so will</span><br><span class=\"line\">           cause your server to become part of large scale DNS amplification </span><br><span class=\"line\">           attacks. Implementing BCP38 within your network would greatly</span><br><span class=\"line\">           reduce such attack surface </span><br><span class=\"line\">        */</span><br><span class=\"line\">        recursion yes;</span><br></pre></td></tr></table></figure>\n\n<p>ä¿®æ”¹ä¸º â†“</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//</span><br><span class=\"line\">// named.conf</span><br><span class=\"line\">//</span><br><span class=\"line\">// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS</span><br><span class=\"line\">// server as a caching only nameserver (as a localhost DNS resolver only).</span><br><span class=\"line\">//</span><br><span class=\"line\">// See /usr/share/doc/bind*/sample/ for example named configuration files.</span><br><span class=\"line\">//</span><br><span class=\"line\"></span><br><span class=\"line\">options &#123;</span><br><span class=\"line\">        listen-on port 53 &#123; any; &#125;;     # æ­¤å¤„ä¿®æ”¹ä¸º any</span><br><span class=\"line\">        listen-on-v6 port 53 &#123; ::1; &#125;;</span><br><span class=\"line\">        directory       &quot;/var/named&quot;;</span><br><span class=\"line\">        dump-file       &quot;/var/named/data/cache_dump.db&quot;;</span><br><span class=\"line\">        statistics-file &quot;/var/named/data/named_stats.txt&quot;;</span><br><span class=\"line\">        memstatistics-file &quot;/var/named/data/named_mem_stats.txt&quot;;</span><br><span class=\"line\">        secroots-file   &quot;/var/named/data/named.secroots&quot;;</span><br><span class=\"line\">        recursing-file  &quot;/var/named/data/named.recursing&quot;;</span><br><span class=\"line\">        allow-query     &#123; any; &#125;;       # æ­¤å¤„ä¿®æ”¹ä¸º any</span><br><span class=\"line\"></span><br><span class=\"line\">        /* </span><br><span class=\"line\">         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.</span><br><span class=\"line\">         - If you are building a RECURSIVE (caching) DNS server, you need to enable </span><br><span class=\"line\">           recursion. </span><br><span class=\"line\">         - If your recursive DNS server has a public IP address, you MUST enable access </span><br><span class=\"line\">           control to limit queries to your legitimate users. Failing to do so will</span><br><span class=\"line\">           cause your server to become part of large scale DNS amplification </span><br><span class=\"line\">           attacks. Implementing BCP38 within your network would greatly</span><br><span class=\"line\">           reduce such attack surface </span><br><span class=\"line\">        */</span><br><span class=\"line\">        recursion yes;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-é…ç½®-Linux2-çš„-named-rfc1912-zones-åŒºåŸŸæ–‡ä»¶\"><a href=\"#3-é…ç½®-Linux2-çš„-named-rfc1912-zones-åŒºåŸŸæ–‡ä»¶\" class=\"headerlink\" title=\"3. é…ç½® Linux2 çš„ named.rfc1912.zones  åŒºåŸŸæ–‡ä»¶\"></a>3. é…ç½® Linux2 çš„ named.rfc1912.zones  åŒºåŸŸæ–‡ä»¶</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/named.rfc1912.zones    # DNSåŒºåŸŸæ–‡ä»¶</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨æœ€åæ·»åŠ å¦‚ä¸‹å†…å®¹</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zone &quot;skills.lan&quot; IN &#123;</span><br><span class=\"line\">        type slave;</span><br><span class=\"line\">        file &quot;slaves/zxpy&quot;;</span><br><span class=\"line\">        masterfile-format text;</span><br><span class=\"line\">        masters &#123; 10.10.220.101; &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">zone &quot;220.10.10.in-addr.arpa&quot; IN &#123;</span><br><span class=\"line\">        type slave;</span><br><span class=\"line\">        file &quot;slaves/fxpy&quot;;</span><br><span class=\"line\">        masterfile-format text;</span><br><span class=\"line\">        masters &#123; 10.10.220.101; &#125;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-å¯åŠ¨-Linux2-çš„-DNS-æœåŠ¡\"><a href=\"#4-å¯åŠ¨-Linux2-çš„-DNS-æœåŠ¡\" class=\"headerlink\" title=\"4. å¯åŠ¨ Linux2 çš„ DNS æœåŠ¡\"></a>4. å¯åŠ¨ Linux2 çš„ DNS æœåŠ¡</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">åŠ å…¥å¼€æœºè‡ªå¯å¹¶ç«‹å³å¯åŠ¨ named æœåŠ¡</span></span><br><span class=\"line\">systemctl enable named --now</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"æœ€åä¸€ä¸ªéƒ¨åˆ†\"><a href=\"#æœ€åä¸€ä¸ªéƒ¨åˆ†\" class=\"headerlink\" title=\"æœ€åä¸€ä¸ªéƒ¨åˆ†\"></a>æœ€åä¸€ä¸ªéƒ¨åˆ†</h1><h2 id=\"æµ‹è¯•\"><a href=\"#æµ‹è¯•\" class=\"headerlink\" title=\"æµ‹è¯•\"></a>æµ‹è¯•</h2><p>å…ˆæµ‹è¯•ä¸»DNS</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux1 ~]# nslookup 10.10.220.103     # æµ‹è¯•åå‘è§£æ</span><br><span class=\"line\">103.220.10.10.in-addr.arpa      name = linux3.skills.lan.</span><br><span class=\"line\">[root@linux1 ~]# nslookup linux3.skills.lan # æµ‹è¯•æ­£å‘è§£æ</span><br><span class=\"line\">Server:         10.10.220.101</span><br><span class=\"line\">Address:        10.10.220.101#53</span><br><span class=\"line\"></span><br><span class=\"line\">Name:   linux3.skills.lan</span><br><span class=\"line\">Address: 10.10.220.103</span><br><span class=\"line\"></span><br><span class=\"line\">[root@linux1 ~]# </span><br></pre></td></tr></table></figure>\n\n<p>å†æµ‹è¯•å‰¯DNS</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux2 ~]# nslookup 10.10.220.103     # æµ‹è¯•åå‘è§£æ</span><br><span class=\"line\">103.220.10.10.in-addr.arpa      name = linux3.skills.lan.</span><br><span class=\"line\">[root@linux2 ~]# nslookup linux3.skills.lan # æµ‹è¯•æ­£å‘è§£æ</span><br><span class=\"line\">Server:         10.10.220.101</span><br><span class=\"line\">Address:        10.10.220.101#53</span><br><span class=\"line\"></span><br><span class=\"line\">Name:   linux3.skills.lan</span><br><span class=\"line\">Address: 10.10.220.103</span><br><span class=\"line\"></span><br><span class=\"line\">[root@linux2 ~]# </span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœå‡ºç°ä»¥ä¸Šè¾“å‡ºè¯´æ˜ä½ çš„ä¸»DNSå’Œå‰¯DNSçš„æ­£åå‘é…ç½®æ–‡ä»¶é…ç½®æ­£ç¡®</p>\n<h3 id=\"é—®é¢˜è§£å†³\"><a href=\"#é—®é¢˜è§£å†³\" class=\"headerlink\" title=\"é—®é¢˜è§£å†³\"></a>é—®é¢˜è§£å†³</h3><p>å‡å¦‚ä¸Šæ–¹è¾“å‡ºä¸æ­£å¸¸ï¼Œè¯·æ£€æŸ¥ä½ çš„DNSåŒºåŸŸé…ç½®æ–‡ä»¶,æ˜¯å¦æ‹¼é”™å•è¯!</p>\n<p>å¦‚æœä¸»DNSæ­£å¸¸å‰¯DNSä¸æ­£å¸¸ï¼Œè¯·æ£€æŸ¥ Linux2 ä¸‹é¢çš„ slaves ç›®å½• æ˜¯å¦å­˜åœ¨ zxpy å’Œ fxpy æ–‡ä»¶</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux2 ~]# ll /var/named/slaves/</span><br><span class=\"line\">æ€»ç”¨é‡ 8</span><br><span class=\"line\">-rw-r--r--. 1 named named 536  4æœˆ 12 15:39 fxpy</span><br><span class=\"line\">-rw-r--r--. 1 named named 482  4æœˆ 12 15:15 zxpy</span><br><span class=\"line\">[root@linux2 ~]# </span><br></pre></td></tr></table></figure>\n\n<p><font color=\"red\"><b>å¦‚æœä¸å­˜åœ¨è¯·é‡å¯ Linux1 å’Œ Linux2 çš„ DNS æœåŠ¡,å†å°è¯•æ£€æŸ¥æ­¤ç›®å½•ä¸‹çš„æ–‡ä»¶æˆ–è€…æ£€æŸ¥é˜²ç«å¢™ç«¯å£æ˜¯å¦å¼€æ”¾,å¦‚æœè¿˜æ˜¯ä¸å­˜åœ¨è¯·åœ¨ä»”ç»†æ£€æŸ¥DNSåŒºåŸŸé…ç½®æ–‡ä»¶ä¸­çš„åŸŸåå’ŒIPåœ°å€æ˜¯å¦å¡«å†™æ­£ç¡®å•è¯æ˜¯å¦æ‹¼é”™ï¼ï¼</b></font></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">linux1</span> </span><br><span class=\"line\">[root@linux1 ~]# systemctl restart named</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">linux2</span></span><br><span class=\"line\">[root@linux2 ~]# systemctl restart named</span><br></pre></td></tr></table></figure>\n\n<p>æ£€æŸ¥æ¸…å•ï¼š</p>\n<ol>\n<li>è¯·ç¡®è®¤ä½ çš„é˜²ç«å¢™ç«¯å£æ˜¯å¦æ­£ç¡®å¼€æ”¾ 53&#x2F;TCP 53&#x2F;UDP</li>\n<li>ç¡®è®¤ä½ çš„ä¸»DNSæœåŠ¡å™¨å’Œå‰¯DNSæœåŠ¡å™¨çš„DNSè®°å½•æ˜¯å¦æ­£ç¡®ã€‚</li>\n<li>ä½ å¯ä»¥æŸ¥çœ‹ç›¸å…³æ—¥å¿—ï¼ŒæŸ¥çœ‹æ˜¯å¦æŠ¥é”™ã€‚</li>\n<li>ç¡®è®¤ä½ çš„ä¸»DNSæœåŠ¡å™¨å’Œå‰¯DNSæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®ï¼Œé…ç½®æ–‡ä»¶æœ‰ï¼š<br>&#x2F;etc&#x2F;named.conf             # DNSä¸»é…ç½®æ–‡ä»¶<br>&#x2F;etc&#x2F;named.rfc1912.zones    # DNSåŒºåŸŸé…ç½®æ–‡ä»¶<br>&#x2F;var&#x2F;named&#x2F;zxpy             # DNSæ­£å‘è§£ææ–‡ä»¶<br>&#x2F;var&#x2F;named&#x2F;fxpy             # DNSåå‘è§£ææ–‡ä»¶<br>&#x2F;var&#x2F;named&#x2F;slaves&#x2F;*         # å‰¯DNSæœåŠ¡å™¨ä»ä¸»DNSæ‹‰å–çš„æ–‡ä»¶</li>\n</ol>\n",
            "tags": [
                "åšå®¢",
                "èŒä¸šæŠ€èƒ½å¤§èµ›",
                "æ•™ç¨‹"
            ]
        },
        {
            "id": "https://blog.tianjiaji.dedyn.io/2024/04/12/Tomcat/undefined/undefined.html",
            "url": "https://blog.tianjiaji.dedyn.io/2024/04/12/Tomcat/undefined/undefined.html",
            "title": "Tomcat æœåŠ¡",
            "date_published": "2024-04-11T20:11:11.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><center><font size=\"6\"><b>Tomcat æœåŠ¡</b></font></center>\n\n<hr>\n<h2 id=\"é¢˜ç›®\"><a href=\"#é¢˜ç›®\" class=\"headerlink\" title=\"é¢˜ç›®\"></a>é¢˜ç›®</h2><p>3ï¼tomcat æœåŠ¡<br>ä»»åŠ¡æè¿°ï¼šé‡‡ç”¨ Tomcat æ­å»ºåŠ¨æ€ç½‘ç«™ã€‚</p>\n<p>(1)é…ç½® linux2 ä¸º nginx æœåŠ¡å™¨ï¼Œé»˜è®¤æ–‡æ¡£ index.html çš„å†…å®¹ä¸º â€œHelloNginxâ€ï¼›ä»…å…è®¸ä½¿ç”¨åŸŸåè®¿é—®ï¼Œhttp è®¿é—®è‡ªåŠ¨è·³è½¬åˆ° httpsã€‚<br>(2)åˆ©ç”¨ nginx åå‘ä»£ç†ï¼Œå®ç° linux3 å’Œ linux4 çš„ tomcat è´Ÿè½½å‡è¡¡ï¼Œé€šè¿‡ https&#x2F;&#x2F;tomcat.skills.lan åŠ å¯†è®¿é—® Tomcat<br>(3)é…ç½® linux3 å’Œ linux4 ä¸º tomcat æœåŠ¡å™¨ï¼Œç½‘ç«™é»˜è®¤é¦–é¡µå†…å®¹åˆ†åˆ«ä¸º â€œtomcatAâ€ å’Œ â€œtomcatBâ€ï¼Œä»…ä½¿ç”¨åŸŸåè®¿é—® 80 ç«¯å£çš„ http æœåŠ¡ã€‚</p>\n<hr>\n<h2 id=\"æ•™ç¨‹\"><a href=\"#æ•™ç¨‹\" class=\"headerlink\" title=\"æ•™ç¨‹\"></a>æ•™ç¨‹</h2><h3 id=\"ç¬¬ä¸€æ­¥\"><a href=\"#ç¬¬ä¸€æ­¥\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥\"></a>ç¬¬ä¸€æ­¥</h3><p><font color=\"red\"><b>éœ€è¦å…ˆé…ç½® Tomcat æœåŠ¡å™¨æ‰èƒ½é…ç½® Nginx æœåŠ¡</b></font></p>\n<p>é¢˜ç›®ï¼š<br>(3)é…ç½® linux3 å’Œ linux4 ä¸º tomcat æœåŠ¡å™¨ï¼Œç½‘ç«™é»˜è®¤é¦–é¡µå†…å®¹åˆ†åˆ«ä¸º â€œtomcatAâ€ å’Œ â€œtomcatBâ€ï¼Œä»…ä½¿ç”¨åŸŸåè®¿é—® 80 ç«¯å£çš„ http æœåŠ¡ã€‚</p>\n<hr>\n<h4 id=\"1-å®‰è£…-Tomcat-æœåŠ¡å™¨\"><a href=\"#1-å®‰è£…-Tomcat-æœåŠ¡å™¨\" class=\"headerlink\" title=\"1.å®‰è£… Tomcat æœåŠ¡å™¨\"></a>1.å®‰è£… Tomcat æœåŠ¡å™¨</h4><p>ä¸º linux3 å®‰è£… Tomcat å¹¶å¼€æ”¾é˜²ç«å¢™ç«¯å£</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux3 ~]# yum install tomcat* -y</span><br><span class=\"line\">[root@linux3 ~]# firewall-cmd --permanent --zone=public --add-port=&#123;80,8080,443&#125;/tcp </span><br><span class=\"line\">[root@linux3 ~]# firewall-cmd --reload                      # æ›´æ–°é˜²ç«å¢™é…ç½®</span><br></pre></td></tr></table></figure>\n\n<p>ä¸º linux4 å®‰è£… Tomcat å¹¶å¼€æ”¾é˜²ç«å¢™ç«¯å£</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux4 ~]# yum install tomcat* -y</span><br><span class=\"line\">[root@linux4 ~]# firewall-cmd --permanent --zone=public --add-port=&#123;80,8080,443&#125;/tcp </span><br><span class=\"line\">[root@linux4 ~]# firewall-cmd --reload                       # æ›´æ–°é˜²ç«å¢™é…ç½®</span><br></pre></td></tr></table></figure>\n\n\n<p>ç«¯å£å®šä¹‰ï¼š<br>80      httpæœåŠ¡<br>443     httpsæœåŠ¡ # è™½ç„¶å¥½åƒç”¨ä¸ä¸Š<br>8080    ä¸€èˆ¬ä¹Ÿæ˜¯httpä¹‹ç±»çš„æœåŠ¡</p>\n<hr>\n<h4 id=\"é…ç½®-Tomcat-å…ˆè®©æœåŠ¡é£èµ·æ¥\"><a href=\"#é…ç½®-Tomcat-å…ˆè®©æœåŠ¡é£èµ·æ¥\" class=\"headerlink\" title=\"é…ç½® Tomcat [å…ˆè®©æœåŠ¡é£èµ·æ¥]\"></a>é…ç½® Tomcat [å…ˆè®©æœåŠ¡é£èµ·æ¥]</h4><hr>\n<h5 id=\"Linux-3-é…ç½®\"><a href=\"#Linux-3-é…ç½®\" class=\"headerlink\" title=\"Linux 3 é…ç½®\"></a>Linux 3 é…ç½®</h5><p>æ‰“å¼€é…ç½®æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux3 ~]# vim /etc/tomcat/server.xml</span><br></pre></td></tr></table></figure>\n\n<p>å¤§çº¦ï¼š131è¡Œ</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot;&gt;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>æ”¹ä¸º â†“</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;linux3.skills.lan&quot;&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n<p>å¤§çº¦ï¼š151è¡Œ</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Host name=&quot;localhost&quot;  appBase=&quot;webapps&quot;</span><br><span class=\"line\">      unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>æ”¹ä¸º â†“</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&lt;Host name=&quot;linux3.skills.lan&quot;  appBase=&quot;webapps&quot;</span><br><span class=\"line\">      unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n<p>è®¾ç½®å¼€æœºè‡ªå¯ï¼Œç„¶å â€“now ä»£è¡¨ç«‹å³å¯åŠ¨</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable tomcat --now </span><br></pre></td></tr></table></figure>\n<p>åˆ é™¤ç«™ç‚¹æ¨¡æ¿æ–‡ä»¶</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -rf  /usr/share/tomcat/webapps/ROOT/*</span><br></pre></td></tr></table></figure>\n<p>åˆ›å»ºindex.htmlï¼Œå¹¶å†™å…¥â€TomcatAâ€</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &quot;TomcatA&quot; &gt;  /usr/share/tomcat/webapps/ROOT/index.html</span><br></pre></td></tr></table></figure>\n<p>é‡å¯TomcatæœåŠ¡</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart tomcat.service</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h5 id=\"Linux-4-é…ç½®\"><a href=\"#Linux-4-é…ç½®\" class=\"headerlink\" title=\"Linux 4 é…ç½®\"></a>Linux 4 é…ç½®</h5><p>æ‰“å¼€é…ç½®æ–‡ä»¶ï¼š</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux4 ~]# vim /etc/tomcat/server.xml</span><br></pre></td></tr></table></figure>\n\n<p>å¤§çº¦ï¼š131è¡Œ</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot;&gt;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>æ”¹ä¸º â†“</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;linux4.skills.lan&quot;&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n<p>å¤§çº¦ï¼š151è¡Œ</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Host name=&quot;localhost&quot;  appBase=&quot;webapps&quot;</span><br><span class=\"line\">      unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>æ”¹ä¸º â†“</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&lt;Host name=&quot;linux4.skills.lan&quot;  appBase=&quot;webapps&quot;</span><br><span class=\"line\">      unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n<p>è®¾ç½®å¼€æœºè‡ªå¯ï¼Œç„¶åç«‹å³å¯åŠ¨ã€‚</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable tomcat --now </span><br></pre></td></tr></table></figure>\n\n<p>åˆ é™¤æ¨¡æ¿æ–‡ä»¶</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -rf  /usr/share/tomcat/webapps/ROOT/*</span><br></pre></td></tr></table></figure>\n<p>åˆ›å»ºindex.htmlï¼Œå¹¶å†™å…¥â€TomcatBâ€</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &quot;TomcatB&quot; &gt;  /usr/share/tomcat/webapps/ROOT/index.html</span><br></pre></td></tr></table></figure>\n<p>é‡å¯æœåŠ¡</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart tomcat.service</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"æµ‹è¯•-Tomcat\"><a href=\"#æµ‹è¯•-Tomcat\" class=\"headerlink\" title=\"æµ‹è¯• Tomcat\"></a>æµ‹è¯• Tomcat</h4><p>ä½¿ç”¨ curl å‘½ä»¤ è¿›è¡ŒéªŒè¯ï¼Œå¦‚ï¼š</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl linux3.skills.lan:8080</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl linux4.skills.lan:8080</span><br></pre></td></tr></table></figure>\n<p>æ•ˆæœå‚è€ƒ:<br><a href=\"https://imgse.com/i/pFXyRNn\"><img src=\"https://s21.ax1x.com/2024/04/11/pFXyRNn.png\" alt=\"pFXyRNn.png\"></a><br><font color=\"red\"><b>æç¤ºï¼šè‹¥æ— æ³•è¿æ¥è¯·æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦æ”¾è¡Œç›¸åº”ç«¯å£ï¼Œä»¥åŠæµ‹è¯•æ—¶æ˜¯å¦è¾“å…¥ç«¯å£å·ï¼å¦‚:8080ç«¯å£</b></font></p>\n<hr>\n<h4 id=\"æ›´æ”¹ç«¯å£\"><a href=\"#æ›´æ”¹ç«¯å£\" class=\"headerlink\" title=\"æ›´æ”¹ç«¯å£\"></a>æ›´æ”¹ç«¯å£</h4><p>å› ä¸ºè¯¥æœåŠ¡é»˜è®¤æ²¡æœ‰ä½¿ç”¨rootç”¨æˆ·æ‰€ä»¥åœ¨ä½¿ç”¨é«˜ä½ç«¯å£ï¼ˆ0~1024ï¼‰çš„æ—¶å€™æ²¡æœ‰æƒé™ï¼Œä¼šå¯¼è‡´æœåŠ¡æ²¡æ³•æ­£å¸¸å¯åŠ¨ã€‚</p>\n<p><font color=\"red\"><b>æ³¨æ„ï¼šä¸¤å° Tomcat æœåŠ¡å™¨éƒ½è¦æ”¹</b></font></p>\n<p>æ”¹æƒé™ï¼š</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /usr/lib/systemd/system/tomcat.service</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">user=tomcat</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>æ”¹ä¸º â†“</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">user=root</span><br></pre></td></tr></table></figure>\n\n<p>ä¿®æ”¹ç«¯å£:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/tomcat/server.xml</span><br></pre></td></tr></table></figure>\n<p>å¤§çº¦åœ¨ç¬¬69è¡Œï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;</span><br><span class=\"line\">           connectionTimeout=&quot;20000&quot;</span><br><span class=\"line\">           redirectPort=&quot;8443&quot; /&gt;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>æ”¹ä¸º â†“</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&lt;Connector port=&quot;80&quot; protocol=&quot;HTTP/1.1&quot;</span><br><span class=\"line\">           connectionTimeout=&quot;20000&quot;</span><br><span class=\"line\">           redirectPort=&quot;443&quot; /&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart tomcat.service</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å†æ¬¡æµ‹è¯•-Tomcat\"><a href=\"#å†æ¬¡æµ‹è¯•-Tomcat\" class=\"headerlink\" title=\"å†æ¬¡æµ‹è¯• Tomcat\"></a>å†æ¬¡æµ‹è¯• Tomcat</h4><p>ä½¿ç”¨ curl å‘½ä»¤ è¿›è¡ŒéªŒè¯ï¼Œå¦‚ï¼š</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl http://linux3.skills.lan</span><br></pre></td></tr></table></figure>\n<p>æ•ˆæœå‚è€ƒ:<br><a href=\"https://imgse.com/i/pFXyRNn\"><img src=\"https://s21.ax1x.com/2024/04/11/pFXyRNn.png\" alt=\"pFXyRNn.png\"></a><br><font color=\"red\"><b>æç¤ºï¼šè‹¥æ— æ³•è¿æ¥è¯·æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦æ”¾è¡Œç›¸åº”ç«¯å£ï¼Œä»¥åŠæµ‹è¯•æ—¶æ˜¯å¦è¾“å…¥ç«¯å£å·ï¼å¦‚:80ç«¯å£</b></font></p>\n<hr>\n<h3 id=\"ç¬¬äºŒæ­¥\"><a href=\"#ç¬¬äºŒæ­¥\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥\"></a>ç¬¬äºŒæ­¥</h3><p>é¢˜ç›®ï¼š<br>(1)é…ç½® linux2 ä¸º nginx æœåŠ¡å™¨ï¼Œé»˜è®¤æ–‡æ¡£ index.html çš„å†…å®¹ä¸º â€œhellonginxâ€ï¼›ä»…å…è®¸ä½¿ç”¨åŸŸåè®¿é—®ï¼Œhttp è®¿é—®è‡ªåŠ¨è·³è½¬åˆ° httpsã€‚</p>\n<hr>\n<h4 id=\"å®‰è£…-Nginx\"><a href=\"#å®‰è£…-Nginx\" class=\"headerlink\" title=\"å®‰è£… Nginx\"></a>å®‰è£… Nginx</h4><p>å®‰è£… Nginx æœåŠ¡ å¹¶å¼€æ”¾ Linux2 ç›¸åº”ç«¯å£</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux2 ~]# yum install nginx* -y</span><br><span class=\"line\">[root@linux2 ~]# firewall-cmd --permanent --zone=public --add-port=&#123;80,443&#125;/tcp </span><br><span class=\"line\">[root@linux2 ~]# firewall-cmd --reload                      # æ›´æ–°é˜²ç«å¢™é…ç½®</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"é…ç½®-nginx-conf\"><a href=\"#é…ç½®-nginx-conf\" class=\"headerlink\" title=\"é…ç½® nginx.conf\"></a>é…ç½® nginx.conf</h4><p>æ‰“å¼€ Nginx é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux2 ~]# vim /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure>\n\n<p>å†™å…¥é…ç½®:<br><font color=\"red\"><b>æ³¨æ„ï¼šç¼–è¾‘å‰è¯·æ³¨é‡Šå¤šä½™çš„é…ç½®ï¼Œä»¥ä¸‹é…ç½®å¿…é¡»å†™åœ¨HTTPæ¨¡å—é‡Œ.</b></font></p>\n<p>å°±æ˜¯ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http&#123;</span><br><span class=\"line\">    è¿™é‡Œé¢ï¼ï¼ï¼</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"># æ‹’ç» 80ç«¯å£ ä½¿ç”¨ IP åœ°å€è®¿é—®</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80 default_server;</span><br><span class=\"line\">    server_name _;</span><br><span class=\"line\">    return 403;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># æ‹’ç» 443ç«¯å£ ä½¿ç”¨ IP åœ°å€è®¿é—®</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">        listen 443 default_server;</span><br><span class=\"line\">        server_name _;</span><br><span class=\"line\">        ssl_certificate &quot;/etc/ssl/skills.crt&quot;;</span><br><span class=\"line\">        ssl_certificate_key &quot;/etc/ssl/skills.key&quot;;</span><br><span class=\"line\">        return 403;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># HTTP è®¿é—®è‡ªåŠ¨è·³è½¬åˆ° HTTPS</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80;</span><br><span class=\"line\">    server_name linux2.skills.lan;</span><br><span class=\"line\">    return 301 https://$server_name$request_uri;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># é…ç½® linux2.skills.com çš„ HTTPS æœåŠ¡</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">        listen 443 ssl;</span><br><span class=\"line\">        server_name linux2.skills.lan;</span><br><span class=\"line\">        ssl_certificate /etc/ssl/skills.crt;</span><br><span class=\"line\">        ssl_certificate_key /etc/ssl/skills.key;</span><br><span class=\"line\">        root /usr/share/nginx/html;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è®¾ç½®å¼€æœºæ‰§è¡Œå¹¶ä¸”ç«‹å³å¯åŠ¨ # å¯åŠ¨æœåŠ¡</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable nginx --now</span><br></pre></td></tr></table></figure>\n\n<p>æç¤ºï¼šä½ å¯ä»¥ä½¿ç”¨æ­¤å‘½ä»¤æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nginx -t</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ç¼–å†™HTMLæ–‡ä»¶è¾“å‡ºHelloNginx\"><a href=\"#ç¼–å†™HTMLæ–‡ä»¶è¾“å‡ºHelloNginx\" class=\"headerlink\" title=\"ç¼–å†™HTMLæ–‡ä»¶è¾“å‡ºHelloNginx\"></a>ç¼–å†™HTMLæ–‡ä»¶è¾“å‡ºHelloNginx</h4><p>å…ˆåˆ é™¤è‡ªå¸¦çš„æ¨¡æ¿æ–‡ä»¶</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -rf /usr/share/nginx/html/*</span><br></pre></td></tr></table></figure>\n\n<p>åˆ›å»ºHTMLæ–‡ä»¶</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &quot;HelloNginx&quot; &gt; /usr/share/nginx/html/index.html</span><br></pre></td></tr></table></figure>\n\n<p>é‡å¯æœåŠ¡</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart nginx</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æµ‹è¯•\"><a href=\"#æµ‹è¯•\" class=\"headerlink\" title=\"æµ‹è¯•\"></a>æµ‹è¯•</h4><p>ä½¿ç”¨ curl å‘½ä»¤ è¿›è¡ŒéªŒè¯ï¼Œå¦‚åå¤ä½¿ç”¨æ­¤å‘½ä»¤ï¼š</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl https://linux2.skills.lan</span><br></pre></td></tr></table></figure>\n<p>ç»“æœå‚è€ƒï¼š<br><a href=\"https://imgse.com/i/pFXRYFJ\"><img src=\"https://s21.ax1x.com/2024/04/11/pFXRYFJ.png\" alt=\"pFXRYFJ.png\"></a></p>\n<p><font color=\"red\"><b>æç¤ºï¼šè‹¥æ— æ³•è¿æ¥è¯·æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦æ”¾è¡Œç›¸åº”ç«¯å£ï¼Œä»¥åŠæµ‹è¯•æ—¶æ˜¯å¦è¾“å…¥ç«¯å£å·ï¼å¦‚:443ç«¯å£</b></font></p>\n<hr>\n<h3 id=\"ç¬¬ä¸‰æ­¥\"><a href=\"#ç¬¬ä¸‰æ­¥\" class=\"headerlink\" title=\"ç¬¬ä¸‰æ­¥\"></a>ç¬¬ä¸‰æ­¥</h3><p>é¢˜ç›®ï¼š<br>(2)åˆ©ç”¨ nginx åå‘ä»£ç†ï¼Œå®ç° linux3 å’Œ linux4 çš„ tomcat è´Ÿè½½å‡è¡¡ï¼Œé€šè¿‡ https&#x2F;&#x2F;tomcat.skills.lan åŠ å¯†è®¿é—® Tomcat</p>\n<h4 id=\"é…ç½®-nginx-conf-1\"><a href=\"#é…ç½®-nginx-conf-1\" class=\"headerlink\" title=\"é…ç½® nginx.conf\"></a>é…ç½® nginx.conf</h4><p>æ‰“å¼€ Nginx é…ç½®æ–‡ä»¶</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux2 ~]# vim /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure>\n\n<p>å†™å…¥é…ç½®:<br><font color=\"red\"><b>æ³¨æ„ï¼šç¼–è¾‘å‰è¯·æ³¨é‡Šå¤šä½™çš„é…ç½®ï¼Œä»¥ä¸‹é…ç½®å¿…é¡»å†™åœ¨HTTPæ¨¡å—é‡Œ.</b></font></p>\n<p>å°±æ˜¯ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http&#123;</span><br><span class=\"line\">    è¿™é‡Œé¢ï¼ï¼ï¼</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<p>æ·»åŠ é…ç½®ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># è¿™ä¸ªæ¨¡å—å®šä¹‰äº†ä¸€ä¸ªåä¸º tomcat çš„ä¸Šæ¸¸æœåŠ¡å™¨ç»„ï¼Œç”¨äºè´Ÿè½½å‡è¡¡</span><br><span class=\"line\">upstream tomcat &#123;</span><br><span class=\"line\">    server linux3.skills.lan:80;</span><br><span class=\"line\">    server linux4.skills.lan:80;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># ç›‘å¬443ç«¯å£çš„æœåŠ¡å™¨ï¼Œå¹¶å°†æ‰€æœ‰è¯·æ±‚ä»£ç†åˆ°ä¸Šé¢å®šä¹‰çš„tomcatæœåŠ¡å™¨ç»„</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 443 ssl http2;</span><br><span class=\"line\">    server_name tomcat.skills.lan;</span><br><span class=\"line\">    ssl_certificate &quot;/etc/ssl/skills.crt&quot;;</span><br><span class=\"line\">    ssl_certificate_key &quot;/etc/ssl/skills.key&quot;;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        proxy_pass http://tomcat;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å…¨éƒ¨é…ç½®ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># è¿™ä¸ªæ¨¡å—å®šä¹‰äº†ä¸€ä¸ªåä¸º tomcat çš„ä¸Šæ¸¸æœåŠ¡å™¨ç»„ï¼Œç”¨äºè´Ÿè½½å‡è¡¡</span><br><span class=\"line\">upstream tomcat &#123;</span><br><span class=\"line\">    server linux3.skills.lan:80;</span><br><span class=\"line\">    server linux4.skills.lan:80;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># æ‹’ç» 80ç«¯å£ ä½¿ç”¨ IP åœ°å€è®¿é—®</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80 default_server;</span><br><span class=\"line\">    server_name _;</span><br><span class=\"line\">    return 403;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># æ‹’ç» 443ç«¯å£ ä½¿ç”¨ IP åœ°å€è®¿é—®</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">        listen 443 default_server;</span><br><span class=\"line\">        server_name _;</span><br><span class=\"line\">        ssl_certificate &quot;/etc/ssl/skills.crt&quot;;</span><br><span class=\"line\">        ssl_certificate_key &quot;/etc/ssl/skills.key&quot;;</span><br><span class=\"line\">        return 403;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># HTTP è®¿é—®è‡ªåŠ¨è·³è½¬åˆ° HTTPS</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 80;</span><br><span class=\"line\">    server_name linux2.skills.lan;</span><br><span class=\"line\">    return 301 https://$server_name$request_uri;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># ç›‘å¬443ç«¯å£çš„æœåŠ¡å™¨ï¼Œå¹¶å°†æ‰€æœ‰è¯·æ±‚ä»£ç†åˆ°ä¸Šé¢å®šä¹‰çš„tomcatæœåŠ¡å™¨ç»„</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">    listen 443 ssl http2;</span><br><span class=\"line\">    server_name tomcat.skills.lan;</span><br><span class=\"line\">    ssl_certificate &quot;/etc/ssl/skills.crt&quot;;</span><br><span class=\"line\">    ssl_certificate_key &quot;/etc/ssl/skills.key&quot;;</span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        proxy_pass http://tomcat;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># é…ç½® linux2.skills.com çš„ HTTPS æœåŠ¡</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\">        listen 443 ssl;</span><br><span class=\"line\">        server_name linux2.skills.lan;</span><br><span class=\"line\">        ssl_certificate /etc/ssl/skills.crt;</span><br><span class=\"line\">        ssl_certificate_key /etc/ssl/skills.key;</span><br><span class=\"line\">        root /usr/share/nginx/html;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¯¦ç»†è§£é‡Šï¼š</p>\n<ol>\n<li>upstream tomcat: è¿™ä¸ªæ¨¡å—å®šä¹‰äº†ä¸€ä¸ªåä¸ºtomcatçš„æœåŠ¡å™¨ç»„ï¼ŒåŒ…å«ä¸¤å°æœåŠ¡å™¨linux3.skills.lanå’Œlinux4.skills.lanï¼Œå®ƒä»¬éƒ½ç›‘å¬80ç«¯å£ã€‚è¿™é€šå¸¸ç”¨äºè´Ÿè½½å‡è¡¡ã€‚</li>\n<li>server (ç¬¬ä¸€ä¸ª): è¿™ä¸ªæœåŠ¡å™¨å—è®¾ç½®äº†ä¸€ä¸ªé»˜è®¤çš„ç›‘å¬80ç«¯å£çš„æœåŠ¡å™¨ã€‚ä»»ä½•æ²¡æœ‰åŒ¹é…ç‰¹å®šserver_nameçš„è¯·æ±‚éƒ½ä¼šè¢«è¿™ä¸ªæœåŠ¡å™¨æ•è·ï¼Œå¹¶è¿”å›403ç¦æ­¢è®¿é—®é”™è¯¯ã€‚</li>\n<li>server (ç¬¬äºŒä¸ª): ç±»ä¼¼äºç¬¬ä¸€ä¸ªserverå—ï¼Œä½†è¿™ä¸ªæ˜¯é’ˆå¯¹HTTPSè¯·æ±‚ï¼ˆç›‘å¬443ç«¯å£ï¼‰ã€‚å®ƒä½¿ç”¨æŒ‡å®šçš„è¯ä¹¦å’Œå¯†é’¥æ¥åŠ å¯†é€šä¿¡ï¼Œå¹¶è¿”å›403ç¦æ­¢è®¿é—®é”™è¯¯ã€‚</li>\n<li>server (ç¬¬ä¸‰ä¸ª): è¿™ä¸ªæœåŠ¡å™¨å—ç›‘å¬80ç«¯å£ï¼Œå¹¶å°†æ‰€æœ‰å‘é€åˆ°linux2.skills.lançš„HTTPè¯·æ±‚é‡å®šå‘åˆ°ç›¸åŒçš„æœåŠ¡å™¨åœ°å€ï¼Œä½†ä½¿ç”¨HTTPSåè®®ã€‚</li>\n<li>server (ç¬¬å››ä¸ª): è¿™ä¸ªæœåŠ¡å™¨å—è®¾ç½®äº†ä¸€ä¸ªç›‘å¬443ç«¯å£çš„æœåŠ¡å™¨ï¼Œç”¨äºå¤„ç†å‘é€åˆ°tomcat.skills.lançš„HTTPSè¯·æ±‚ã€‚å®ƒé…ç½®äº†SSLè¯ä¹¦ï¼Œå¹¶å°†æ‰€æœ‰è¯·æ±‚ä»£ç†åˆ°ä¸Šé¢å®šä¹‰çš„tomcatæœåŠ¡å™¨ç»„ã€‚</li>\n<li>server (ç¬¬äº”ä¸ª): è¿™ä¸ªæœåŠ¡å™¨å—ä¹Ÿç›‘å¬443ç«¯å£ï¼Œå¹¶å¤„ç†å‘é€åˆ°linux2.skills.lançš„HTTPSè¯·æ±‚ã€‚å®ƒè®¾ç½®äº†ä¸€ä¸ªæ ¹ç›®å½•&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;htmlï¼Œè¿™æ˜¯é™æ€æ–‡ä»¶å­˜æ”¾çš„ä½ç½®ã€‚</li>\n</ol>\n<hr>\n<p>é…ç½®å‚è€ƒï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># For more information on configuration, see:</span><br><span class=\"line\">#   * Official English Documentation: http://nginx.org/en/docs/</span><br><span class=\"line\">#   * Official Russian Documentation: http://nginx.org/ru/docs/</span><br><span class=\"line\"></span><br><span class=\"line\">user nginx;</span><br><span class=\"line\">worker_processes auto;</span><br><span class=\"line\">error_log /var/log/nginx/error.log;</span><br><span class=\"line\">pid /run/nginx.pid;</span><br><span class=\"line\"></span><br><span class=\"line\"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span><br><span class=\"line\">include /usr/share/nginx/modules/*.conf;</span><br><span class=\"line\"></span><br><span class=\"line\">events &#123;</span><br><span class=\"line\">    worker_connections 1024;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">http &#123;      # æ³¨æ„é…ç½®å¿…é¡»å†™åœ¨è¿™ä¸ªæ¨¡å—çš„å¤§æ‹¬å·é‡Œé¢ï¼ï¼ï¼ï¼ï¼</span><br><span class=\"line\">    log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class=\"line\">                      &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class=\"line\">                      &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">    access_log  /var/log/nginx/access.log  main;</span><br><span class=\"line\"></span><br><span class=\"line\">    sendfile            on;</span><br><span class=\"line\">    tcp_nopush          on;</span><br><span class=\"line\">    tcp_nodelay         on;</span><br><span class=\"line\">    keepalive_timeout   65;</span><br><span class=\"line\">    types_hash_max_size 4096;</span><br><span class=\"line\"></span><br><span class=\"line\">    include             /etc/nginx/mime.types;</span><br><span class=\"line\">    default_type        application/octet-stream;</span><br><span class=\"line\"></span><br><span class=\"line\">    # Load modular configuration files from the /etc/nginx/conf.d directory.</span><br><span class=\"line\">    # See http://nginx.org/en/docs/ngx_core_module.html#include</span><br><span class=\"line\">    # for more information.</span><br><span class=\"line\">    include /etc/nginx/conf.d/*.conf;</span><br><span class=\"line\"></span><br><span class=\"line\">    upstream tomcat &#123;</span><br><span class=\"line\">         server linux3.skills.lan:80;</span><br><span class=\"line\">         server linux4.skills.lan:80;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen       80 default_server;</span><br><span class=\"line\">        listen       [::]:80;</span><br><span class=\"line\">        server_name  _;</span><br><span class=\"line\">\treturn 403;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen       443 default_server;</span><br><span class=\"line\">        listen       [::]:443;</span><br><span class=\"line\">\tssl_certificate &quot;/etc/ssl/skills.crt&quot;;</span><br><span class=\"line\">\tssl_certificate_key &quot;/etc/ssl/skills.key&quot;;</span><br><span class=\"line\">        server_name  _;</span><br><span class=\"line\">        return 403;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen       80;</span><br><span class=\"line\">        listen       [::]:80;</span><br><span class=\"line\">        server_name  linux2.skills.lan;</span><br><span class=\"line\">        return 301 https://\\$server_name\\$request_uri;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">     server &#123;</span><br><span class=\"line\">        listen 443 ssl;</span><br><span class=\"line\">        server_name linux2.skills.lan;</span><br><span class=\"line\">        ssl_certificate /etc/ssl/skills.crt;</span><br><span class=\"line\">        ssl_certificate_key /etc/ssl/skills.key;</span><br><span class=\"line\">        root /usr/share/nginx/html;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    server &#123;</span><br><span class=\"line\">        listen       443 ssl http2;</span><br><span class=\"line\">        server_name  tomcat.skills.lan;</span><br><span class=\"line\">        ssl_certificate &quot;/etc/ssl/skills.crt&quot;;</span><br><span class=\"line\">        ssl_certificate_key &quot;/etc/ssl/skills.key&quot;;</span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">            proxy_pass http://tomcat;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">#        root         /usr/share/nginx/html;</span><br><span class=\"line\">#</span><br><span class=\"line\">#        # Load configuration files for the default server block.</span><br><span class=\"line\">#        include /etc/nginx/default.d/*.conf;</span><br><span class=\"line\">#</span><br><span class=\"line\">#        error_page 404 /404.html;</span><br><span class=\"line\">#        location = /404.html &#123;</span><br><span class=\"line\">#        &#125;</span><br><span class=\"line\">#</span><br><span class=\"line\">#        error_page 500 502 503 504 /50x.html;</span><br><span class=\"line\">#        location = /50x.html &#123;</span><br><span class=\"line\">#        &#125;</span><br><span class=\"line\">#    &#125;</span><br><span class=\"line\">#</span><br><span class=\"line\"># Settings for a TLS enabled server.</span><br><span class=\"line\">#</span><br><span class=\"line\">#    server &#123;</span><br><span class=\"line\">#        listen       443 ssl http2;</span><br><span class=\"line\">#        listen       [::]:443 ssl http2;</span><br><span class=\"line\">#        server_name  _;</span><br><span class=\"line\">#        root         /usr/share/nginx/html;</span><br><span class=\"line\">#        ssl_certificate &quot;/etc/ssl/skills.crt&quot;;</span><br><span class=\"line\">#        ssl_certificate_key &quot;/etc/ssl/skills.key&quot;;</span><br><span class=\"line\">#       \t&#125;</span><br><span class=\"line\">#        ssl_session_cache shared:SSL:1m;</span><br><span class=\"line\">#        ssl_session_timeout  10m;</span><br><span class=\"line\">#        ssl_ciphers PROFILE=SYSTEM;</span><br><span class=\"line\">#        ssl_prefer_server_ciphers on;</span><br><span class=\"line\">#</span><br><span class=\"line\">#        # Load configuration files for the default server block.</span><br><span class=\"line\">#        include /etc/nginx/default.d/*.conf;</span><br><span class=\"line\">#</span><br><span class=\"line\">#        error_page 404 /404.html;</span><br><span class=\"line\">#            location = /40x.html &#123;</span><br><span class=\"line\">#        &#125;</span><br><span class=\"line\">#</span><br><span class=\"line\">#        error_page 500 502 503 504 /50x.html;</span><br><span class=\"line\">#            location = /50x.html &#123;</span><br><span class=\"line\">#        &#125;</span><br><span class=\"line\">#    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<hr>\n<h4 id=\"é…ç½®å®‰å…¨ç­–ç•¥\"><a href=\"#é…ç½®å®‰å…¨ç­–ç•¥\" class=\"headerlink\" title=\"é…ç½®å®‰å…¨ç­–ç•¥\"></a>é…ç½®å®‰å…¨ç­–ç•¥</h4><p>è¿™æ¡å‘½ä»¤ç”¨äºé…ç½® SELinuxï¼ˆå®‰å…¨å¢å¼ºå‹ Linuxï¼‰ï¼Œå…è®¸ Tomcat web æœåŠ¡å™¨ï¼ˆTomcatï¼‰å»ºç«‹ç½‘ç»œè¿æ¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒSELinux çš„ç­–ç•¥å¯èƒ½ä¼šé™åˆ¶ httpd è¿›ç¨‹åªèƒ½è®¿é—®ä¸å…¶æœåŠ¡ç›¸å…³çš„ç«¯å£ã€‚</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setsebool -P httpd_can_network_connect 1             #è¿™æ¡æŒ‡ä»¤å¯ä»¥é…ç½®SELinuxå…è®¸Tomcatç½‘ç»œè¿æ¥</span><br></pre></td></tr></table></figure>\n<p>è®¾ç½®å¼€æœºæ‰§è¡Œå¹¶ä¸”ç«‹å³å¯åŠ¨</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable nginx --now</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æ·»åŠ DNSè§£æ\"><a href=\"#æ·»åŠ DNSè§£æ\" class=\"headerlink\" title=\"æ·»åŠ DNSè§£æ\"></a>æ·»åŠ DNSè§£æ</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /var/named/zxpy </span><br></pre></td></tr></table></figure>\n<p>åŠ å…¥ï¼š</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tomcat  A       10.10.220.102</span><br></pre></td></tr></table></figure>\n<p>é‡å¯DNSæœåŠ¡å™¨</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart named</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"æœ€åä¸€éƒ¨åˆ†\"><a href=\"#æœ€åä¸€éƒ¨åˆ†\" class=\"headerlink\" title=\"æœ€åä¸€éƒ¨åˆ†\"></a>æœ€åä¸€éƒ¨åˆ†</h3><h4 id=\"æµ‹è¯•-1\"><a href=\"#æµ‹è¯•-1\" class=\"headerlink\" title=\"æµ‹è¯•\"></a>æµ‹è¯•</h4><p>ä½¿ç”¨ curl å‘½ä»¤ è¿›è¡ŒéªŒè¯,å¦‚ï¼š</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -i http://linux2.skills.lan    # æµ‹è¯•HTTPé‡å®šå‘åˆ°https</span><br><span class=\"line\">curl -i https://10.10.220.102       # æµ‹è¯•IPè®¿é—®èƒ½å¦è¢«é˜»æ­¢</span><br><span class=\"line\">curl  https://tomcat.skills.lan     # æµ‹è¯•è´Ÿè½½å‡è¡¡æ˜¯å¦æ­£å¸¸</span><br><span class=\"line\">curl  https://linux2.skills.lan     # æµ‹è¯• Hello Nginx èƒ½å¦æ­£å¸¸è¾“å‡º</span><br></pre></td></tr></table></figure>\n<p>ç»“æœå‚è€ƒï¼š<br>å½“ä½¿ç”¨HTTPè®¿é—®æ—¶åº”å½“æŠ¥301çŠ¶æ€ç ï¼Œ301 çŠ¶æ€ç ä»£è¡¨ é‡å®šå‘ï¼Œé‡å®šå‘åˆ°https<br><a href=\"https://imgse.com/i/pFjeLX4\"><img src=\"https://s21.ax1x.com/2024/04/12/pFjeLX4.png\" alt=\"pFjeLX4.png\"></a><br>ç”¨IPåœ°å€è®¿é—®æ—¶åº”å½“æŠ¥ 403 çŠ¶æ€ç ï¼Œ403 çŠ¶æ€ç ä»£è¡¨ ç¦æ­¢è®¿é—®<br><a href=\"https://imgse.com/i/pFjefmj\"><img src=\"https://s21.ax1x.com/2024/04/12/pFjefmj.png\" alt=\"pFjefmj.png\"></a><br>åå¤ä½¿ç”¨æ­¤å‘½ä»¤ï¼ŒTomcatAå’ŒTomcatB åº”å½“äº¤æ›¿å‡ºç°,è¿™ä¸ªæ•ˆæœä¸ºè´Ÿè½½å‡è¡¡<br><a href=\"https://imgse.com/i/pFX6y26\"><img src=\"https://s21.ax1x.com/2024/04/11/pFX6y26.png\" alt=\"pFX6y26.png\"></a><br>ä½¿ç”¨æ­¤å‘½ä»¤æ—¶åº”å½“å‡ºç°Hello Nginx<br><a href=\"https://imgse.com/i/pFXRYFJ\"><img src=\"https://s21.ax1x.com/2024/04/11/pFXRYFJ.png\" alt=\"pFXRYFJ.png\"></a></p>\n<p><font color=\"red\"><b>æç¤ºï¼šè‹¥æ— æ³•è¿æ¥è¯·æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦æ”¾è¡Œç›¸åº”ç«¯å£ï¼ŒDNSè§£æé…ç½®æ˜¯å¦æ­£å¸¸ï¼Œé…ç½®å®Œæ˜¯å¦é‡å¯äº†DNSæœåŠ¡å™¨,æ˜¯å¦æ›´æ”¹äº†SELinuxå®‰å…¨ç­–ç•¥</b></font></p>\n<p>å¦‚æœä½ å¯¹ Nginx çš„é…ç½®æ–‡ä»¶è¿˜æ˜¯ä¸ç†Ÿæ‚‰æ¨èä½ å»å“”å“©å“”å“©ä¸Šçœ‹<a href=\"https://space.bilibili.com/327247876/\">@æŠ€æœ¯è›‹è€å¸ˆ</a>çš„è¿™ä¸ªè§†é¢‘ï¼š<a href=\"https://www.bilibili.com/video/BV1TZ421b7SD/\">Nginxå…¥é—¨å¿…é¡»æ‡‚3å¤§åŠŸèƒ½é…ç½® - WebæœåŠ¡å™¨&#x2F;åå‘ä»£ç†&#x2F;è´Ÿè½½å‡è¡¡</a></p>\n<p>æ­å–œä½ ï¼Œä½ å·²ç»æˆåŠŸé…ç½®äº† Nginx ä½œä¸ºåå‘ä»£ç†æœåŠ¡å™¨ï¼Œå¹¶æˆåŠŸå°† Tomcat é›†ç¾¤éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œå¹¶æˆåŠŸå®ç°è´Ÿè½½å‡è¡¡ï¼ï¼</p>\n",
            "tags": [
                "åšå®¢",
                "èŒä¸šæŠ€èƒ½å¤§èµ›",
                "æ•™ç¨‹"
            ]
        },
        {
            "id": "https://blog.tianjiaji.dedyn.io/2024/03/03/yum%E6%BA%90%E9%85%8D%E7%BD%AE/undefined/undefined.html",
            "url": "https://blog.tianjiaji.dedyn.io/2024/03/03/yum%E6%BA%90%E9%85%8D%E7%BD%AE/undefined/undefined.html",
            "title": "yumæºé…ç½®",
            "date_published": "2024-03-02T16:29:24.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><center><font size=\"6\"><b>yumæºé…ç½®</b></font></center>\n\n<hr>\n<p><font color=\"red\" size=\"5\"><b>æ³¨æ„ï¼šæœ¬æ•™ç¨‹ä»…é€‚ç”¨äºRocky Linux 9.2 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ŒCentOSæˆ–è€…Rocky Linux å¹¶ä¸é€‚ç”¨ï¼ï¼</b></font></p>\n<h2 id=\"ä»‹ç»yum\"><a href=\"#ä»‹ç»yum\" class=\"headerlink\" title=\"ä»‹ç»yum\"></a>ä»‹ç»yum</h2><p style=\"text-indent:2em;\">yumæ˜¯ä¸€ä¸ªåœ¨Fedoraï¼ŒRedHatï¼ŒCentOSç­‰Linuxç³»ç»Ÿä¸­çš„è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨ä¸‹è½½å’Œå®‰è£…RPMåŒ…ï¼Œå¹¶ä¸”è§£å†³åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚yumçš„ä¸»è¦åŠŸèƒ½æ˜¯æ›´æ–¹ä¾¿åœ°æ·»åŠ /åˆ é™¤/æ›´æ–°è½¯ä»¶åŒ…ï¼Œä»¥åŠç®¡ç†å¤§é‡ç³»ç»Ÿçš„æ›´æ–°é—®é¢˜ã€‚</p>\n<p style=\"text-indent:2em;\">yumæ˜¯ä¸€ä¸ªå¯ä»¥å¸®ä½ åœ¨Linuxç³»ç»Ÿä¸Šå®‰è£…å’Œç®¡ç†è½¯ä»¶çš„å·¥å…·ï¼Œå®ƒä¼šè‡ªåŠ¨æ‰¾åˆ°ä½ éœ€è¦çš„è½¯ä»¶åŒ…ï¼Œå¹¶ä¸”æŠŠå®ƒä»¬ä¸‹è½½å’Œå®‰è£…å¥½ï¼Œè¿˜ä¼šå¸®ä½ å¤„ç†è½¯ä»¶ä¹‹é—´çš„å…³ç³»ï¼Œæ¯”å¦‚å“ªäº›è½¯ä»¶éœ€è¦ä¸€èµ·å®‰è£…ï¼Œå“ªäº›è½¯ä»¶ä¸èƒ½åŒæ—¶å®‰è£…ç­‰ç­‰ã€‚yumå¯ä»¥è®©ä½ æ›´æ–¹ä¾¿åœ°æ·»åŠ /åˆ é™¤/æ›´æ–°è½¯ä»¶ï¼Œè€Œä¸ç”¨æ‹…å¿ƒè½¯ä»¶çš„å…¼å®¹æ€§å’Œä¾èµ–æ€§ã€‚</p>\n<p style=\"text-indent:2em;\">é…ç½®yumæºå°±æ˜¯å‘Šè¯‰yumä»å“ªé‡Œè·å–è½¯ä»¶åŒ…çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è½¯ä»¶çš„åå­—ï¼Œç‰ˆæœ¬ï¼Œå¤§å°ï¼Œä¸‹è½½åœ°å€ç­‰ç­‰ã€‚ä¸åŒçš„yumæºå¯èƒ½æœ‰ä¸åŒçš„è½¯ä»¶é€‰æ‹©å’Œæ›´æ–°é€Ÿåº¦ï¼Œæ‰€ä»¥ä½ å¯ä»¥æ ¹æ®ä½ çš„éœ€è¦å’Œå–œå¥½æ¥é€‰æ‹©åˆé€‚çš„yumæºã€‚é…ç½®yumæºå¯ä»¥è®©ä½ æ›´å¿«åœ°ä¸‹è½½è½¯ä»¶ï¼Œä¹Ÿå¯ä»¥è®©ä½ æ‰¾åˆ°æ›´å¤šçš„è½¯ä»¶é€‰é¡¹ã€‚</p>\n\n<h2 id=\"æŒ‚è½½ç³»ç»Ÿé•œåƒ\"><a href=\"#æŒ‚è½½ç³»ç»Ÿé•œåƒ\" class=\"headerlink\" title=\"æŒ‚è½½ç³»ç»Ÿé•œåƒ\"></a>æŒ‚è½½ç³»ç»Ÿé•œåƒ</h2><h3 id=\"é…ç½®æ‰‹åŠ¨æŒ‚è½½\"><a href=\"#é…ç½®æ‰‹åŠ¨æŒ‚è½½\" class=\"headerlink\" title=\"é…ç½®æ‰‹åŠ¨æŒ‚è½½\"></a>é…ç½®æ‰‹åŠ¨æŒ‚è½½</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mount /dev/cdrom /mnt</span><br></pre></td></tr></table></figure>\n<p><font color=\"red\"><b>æ³¨æ„!å¦‚æœä½ ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿæœºé‚£ä¹ˆç³»ç»Ÿé•œåƒé»˜è®¤ç›®å½•ä¸º:&#x2F;dev&#x2F;cdrom,å¦‚æœä½ æ¯”èµ›çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯äº‘å®è®­å¹³å°é‚£ä¹ˆè·¯å¾„ä¸€èˆ¬ä¸º:&#x2F;opt&#x2F;linux.iso. </b></font><br><font color=\"red\"><b>linux.isoä¸ºé•œåƒæ–‡ä»¶ä¸ä¸€å®šå«è¿™ä¸ªåå­—.</b></font></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux1 ~]# ll /mnt</span><br><span class=\"line\">æ€»ç”¨é‡ 26</span><br><span class=\"line\">drwxr-xr-x. 1 root root 2048  5æœˆ 14  2023 AppStream    # â¬…ï¸</span><br><span class=\"line\">drwxrwxr-x. 1 root root 2048  5æœˆ 14  2023 BaseOS       # â¬…ï¸</span><br><span class=\"line\">-rw-r--r--. 1 root root 5504  5æœˆ 12  2023 COMMUNITY-CHARTER</span><br><span class=\"line\">-rw-r--r--. 1 root root 1394  5æœˆ 12  2023 Contributors</span><br><span class=\"line\">drwxrwxr-x. 1 root root 2048  5æœˆ 11  2023 EFI</span><br><span class=\"line\">-rw-r--r--. 1 root root  372  5æœˆ 12  2023 EULA</span><br><span class=\"line\">drwxrwxr-x. 1 root root 2048  5æœˆ 11  2023 images</span><br><span class=\"line\">drwxrwxr-x. 1 root root 2048  5æœˆ 11  2023 isolinux</span><br><span class=\"line\">-rw-r--r--. 1 root root 2204  4æœˆ 27  2023 LICENSE</span><br><span class=\"line\">-rw-r--r--. 1 root root  102  5æœˆ 12  2023 media.repo</span><br><span class=\"line\">-rw-r--r--. 1 root root 1750  5æœˆ 12  2023 RPM-GPG-KEY-Rocky-9</span><br><span class=\"line\">-rw-r--r--. 1 root root 3159  5æœˆ 12  2023 RPM-GPG-KEY-Rocky-9-Testing</span><br></pre></td></tr></table></figure>\n\n<p>AppStreamå’ŒBaseOSè®°ä½è¿™ä¸¤ä¸ªç›®å½•,è¿™ä¸¤ä¸ªç›®å½•å°±æ˜¯æˆ‘ä»¬è¦ç”¨çš„ç›®å½•ã€‚</p>\n<h3 id=\"é…ç½®è‡ªåŠ¨æŒ‚è½½\"><a href=\"#é…ç½®è‡ªåŠ¨æŒ‚è½½\" class=\"headerlink\" title=\"é…ç½®è‡ªåŠ¨æŒ‚è½½\"></a>é…ç½®è‡ªåŠ¨æŒ‚è½½</h3><p>é…ç½®è‡ªåŠ¨æŒ‚è½½å¯ä»¥é¿å…æ¯æ¬¡é‡å¯ç³»ç»Ÿéƒ½è¦çš„æ‰‹åŠ¨æŒ‚è½½ã€‚</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/fstab</span><br></pre></td></tr></table></figure>\n<p>æ·»åŠ æ­¤è¡Œ:</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/dev/cdrom              /mnt                    auto    defaults        0 0</span><br></pre></td></tr></table></figure>\n<p>&#x2F;dev&#x2F;cdrom     â€” è¿™ä¸ªä¸ºé•œåƒè·¯å¾„,å¦‚æœä½ ä½¿ç”¨çš„æ˜¯äº‘å®è®­å¹³å°æ³¨æ„æ­¤è·¯å¾„<br>&#x2F;mnt           â€” è¿™ä¸ªä¸ºæŒ‚è½½çš„ç›®çš„åœ°</p>\n<p>å‚è€ƒ:</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">#</span><br><span class=\"line\"># /etc/fstab</span><br><span class=\"line\"># Created by anaconda on Fri Feb 16 23:38:40 2024</span><br><span class=\"line\">#</span><br><span class=\"line\"># Accessible filesystems, by reference, are maintained under &#x27;/dev/disk/&#x27;.</span><br><span class=\"line\"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info.</span><br><span class=\"line\">#</span><br><span class=\"line\"># After editing this file, run &#x27;systemctl daemon-reload&#x27; to update systemd</span><br><span class=\"line\"># units generated from this file.</span><br><span class=\"line\">#</span><br><span class=\"line\">/dev/mapper/rl-root     /                       xfs     defaults        0 0</span><br><span class=\"line\">UUID=14b60409-4949-4789-9aef-d47da05e953a /boot                   xfs     defaults        0 0</span><br><span class=\"line\">/dev/mapper/rl-swap     none                    swap    defaults        0 0</span><br><span class=\"line\">/dev/cdrom              /mnt                    auto    defaults        0 0     # â¬…ï¸</span><br></pre></td></tr></table></figure>\n\n<p>ä¹Ÿå¯ä»¥ä½¿ç”¨æ­¤å‘½ä»¤è¿›è¡Œæ·»åŠ :</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &#x27;/dev/cdrom              /mnt                    auto    defaults        0 0&#x27; &gt;&gt; /etc/fstab</span><br></pre></td></tr></table></figure>\n<p><font color=\"red\"><b>è­¦å‘Š!åœ¨ä½¿ç”¨æ­¤å‘½ä»¤æ—¶,ç„¶åä¸€å®šè¦æ³¨æ„ä½¿ç”¨çš„æ˜¯&gt;&gt;,è€Œä¸æ˜¯&gt;.</b></font><br>&gt;&gt;æ˜¯åœ¨æœ€åä¸€è¡Œæ·»åŠ <br>&gt; æ˜¯è¦†ç›–æ–‡ä»¶é‡Œçš„å†…å®¹<br><font color=\"red\">ä¸€æ—¦è¾“é”™å®ƒä¼šè¦†ç›–å¯¹åº”æ–‡ä»¶é‡Œçš„å…¶ä»–å†…å®¹ï¼Œæ‰€ä»¥è¯·æ…é‡ä½¿ç”¨ã€‚</font></p>\n<h2 id=\"é…ç½®yumæº\"><a href=\"#é…ç½®yumæº\" class=\"headerlink\" title=\"é…ç½®yumæº\"></a>é…ç½®yumæº</h2><h3 id=\"è¿›å…¥yumé…ç½®æ–‡ä»¶å­˜æ”¾ç›®å½•\"><a href=\"#è¿›å…¥yumé…ç½®æ–‡ä»¶å­˜æ”¾ç›®å½•\" class=\"headerlink\" title=\"è¿›å…¥yumé…ç½®æ–‡ä»¶å­˜æ”¾ç›®å½•\"></a>è¿›å…¥yumé…ç½®æ–‡ä»¶å­˜æ”¾ç›®å½•</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /etc/yum.repos.d/</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¤‡ä»½é…ç½®æ–‡ä»¶\"><a href=\"#å¤‡ä»½é…ç½®æ–‡ä»¶\" class=\"headerlink\" title=\"å¤‡ä»½é…ç½®æ–‡ä»¶\"></a>å¤‡ä»½é…ç½®æ–‡ä»¶</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir bf            # åˆ›å»ºç›®å½•</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv rocky* bf/       # å°†é…ç½®æ–‡ä»¶ç§»åŠ¨è‡³ç›®å½•</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"é€‰æ‹©ä¸€ä¸ªæ¨¡æ¿å¹¶ç¼–è¾‘\"><a href=\"#é€‰æ‹©ä¸€ä¸ªæ¨¡æ¿å¹¶ç¼–è¾‘\" class=\"headerlink\" title=\"é€‰æ‹©ä¸€ä¸ªæ¨¡æ¿å¹¶ç¼–è¾‘\"></a>é€‰æ‹©ä¸€ä¸ªæ¨¡æ¿å¹¶ç¼–è¾‘</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp bf/rocky-devel.repo ./</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim rocky-devel.repo</span><br></pre></td></tr></table></figure>\n\n<p><b>rocky-devel.repoæºæ–‡ä»¶</b></p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># rocky-devel.repo</span><br><span class=\"line\">#</span><br><span class=\"line\"># devel and no-package-left-behind</span><br><span class=\"line\"></span><br><span class=\"line\">[devel]</span><br><span class=\"line\">name=Rocky Linux $releasever - Devel WARNING! FOR BUILDROOT ONLY DO NOT LEAVE ENABLED</span><br><span class=\"line\">mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&amp;repo=devel-$releasever$rltype</span><br><span class=\"line\">#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/devel/$basearch/os/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">enabled=0</span><br><span class=\"line\">countme=1</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-9</span><br><span class=\"line\"></span><br><span class=\"line\">[devel-debug]</span><br><span class=\"line\">name=Rocky Linux $releasever - Devel Debug WARNING! FOR BUILDROOT ONLY DO NOT LEAVE ENABLED</span><br><span class=\"line\">mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&amp;repo=devel-$releasever-debug$rltype</span><br><span class=\"line\">#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/devel/$basearch/debug/tree/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">enabled=0</span><br><span class=\"line\">countme=1</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-9</span><br><span class=\"line\"></span><br><span class=\"line\">[devel-source]</span><br><span class=\"line\">name=Rocky Linux $releasever - Devel Source WARNING! FOR BUILDROOT ONLY DO NOT LEAVE ENABLED</span><br><span class=\"line\">mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&amp;repo=devel-$releasever-source$rltype</span><br><span class=\"line\">#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/devel/source/tree/</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">enabled=0</span><br><span class=\"line\">countme=1</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-9</span><br></pre></td></tr></table></figure>\n\n<p>ä¿®æ”¹ä¸º:</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># rocky-devel.repo</span><br><span class=\"line\">#</span><br><span class=\"line\"># devel and no-package-left-behind</span><br><span class=\"line\"></span><br><span class=\"line\">[devel]</span><br><span class=\"line\">name=Rocky Linux $releasever - Devel WARNING! FOR BUILDROOT ONLY DO NOT LEAVE ENABLED</span><br><span class=\"line\">#mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&amp;repo=devel-$releasever$rltype</span><br><span class=\"line\">baseurl=file:///mnt/BaseOS</span><br><span class=\"line\">gpgcheck=0</span><br><span class=\"line\">enabled=1</span><br><span class=\"line\">countme=1</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-9</span><br><span class=\"line\"></span><br><span class=\"line\">[devel-debug]</span><br><span class=\"line\">name=Rocky Linux $releasever - Devel Debug WARNING! FOR BUILDROOT ONLY DO NOT LEAVE ENABLED</span><br><span class=\"line\">#mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&amp;repo=devel-$releasever-debug$rltype</span><br><span class=\"line\">baseurl=file:///mnt/AppStream</span><br><span class=\"line\">gpgcheck=0</span><br><span class=\"line\">enabled=1</span><br><span class=\"line\">countme=1</span><br><span class=\"line\">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-9</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ›´æ–°ç´¢å¼•\"><a href=\"#æ›´æ–°ç´¢å¼•\" class=\"headerlink\" title=\"æ›´æ–°ç´¢å¼•\"></a>æ›´æ–°ç´¢å¼•</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum makecache</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºå‚è€ƒ:</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux1 ~]# yum makecache</span><br><span class=\"line\">Rocky Linux 9 - Devel WARNING! FOR BUILDROOT ONLY DO NOT LEAVE ENABLED                      1.1 MB/s | 4.1 kB     00:00    </span><br><span class=\"line\">Rocky Linux 9 - Devel Debug WARNING! FOR BUILDROOT ONLY DO NOT LEAVE ENABLED                149 kB/s | 4.5 kB     00:00    </span><br><span class=\"line\">å…ƒæ•°æ®ç¼“å­˜å·²å»ºç«‹ã€‚</span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœå‡ºç°æŠ¥é”™,è¯·æ£€æŸ¥ç³»ç»Ÿé•œåƒæ˜¯å¦æŒ‚è½½,é…ç½®æ–‡ä»¶è·¯å¾„å¡«å†™æ˜¯å¦æ­£ç¡®,ç­‰ç­‰ã€‚<br>æˆ–è€…å¯ä»¥å°è¯•æ¸…ç†ç¼“å­˜åé‡è¯•ï¼š</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum clean all               # æ¸…ç†ç¼“å­˜</span><br></pre></td></tr></table></figure>",
            "tags": [
                "åšå®¢",
                "èŒä¸šæŠ€èƒ½å¤§èµ›",
                "æ•™ç¨‹"
            ]
        },
        {
            "id": "https://blog.tianjiaji.dedyn.io/2024/01/21/2024-01-21-Competition-sample-questions-Shell/undefined/undefined.html",
            "url": "https://blog.tianjiaji.dedyn.io/2024/01/21/2024-01-21-Competition-sample-questions-Shell/undefined/undefined.html",
            "title": "Shell è„šæœ¬ æ•™ç¨‹",
            "date_published": "2024-01-21T12:00:00.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><hr>\n<h2 id=\"Shellè„šæœ¬\"><a href=\"#Shellè„šæœ¬\" class=\"headerlink\" title=\"Shellè„šæœ¬\"></a>Shellè„šæœ¬</h2><hr>\n<h2 id=\"é¢˜ç›®\"><a href=\"#é¢˜ç›®\" class=\"headerlink\" title=\"é¢˜ç›®\"></a>é¢˜ç›®</h2><p>ä»»åŠ¡æè¿°ï¼šè¯·é‡‡ç”¨ shell è„šæœ¬,å®ç°å¿«é€Ÿæ‰¹é‡çš„æ“ä½œã€‚</p>\n<ol>\n<li>åœ¨ linux4 ä¸Šç¼–å†™&#x2F;root&#x2F;createfile.shçš„shellè„šæœ¬ï¼Œåˆ›å»º20ä¸ªæ–‡ä»¶&#x2F;root&#x2F;shell&#x2F;file00è‡³&#x2F;root&#x2F;shell&#x2F;file19ï¼Œå¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™åˆ é™¤å†åˆ›å»ºï¼› æ¯ä¸ªæ–‡ä»¶çš„å†…å®¹åŒæ–‡ä»¶åï¼Œ å¦‚file00æ–‡ä»¶çš„å†…å®¹ä¸ºâ€œfile00â€ã€‚</li>\n<li>ç”¨&#x2F;root&#x2F;createfile.shå‘½ä»¤æµ‹è¯•ã€‚</li>\n</ol>\n<h2 id=\"æ•™ç¨‹\"><a href=\"#æ•™ç¨‹\" class=\"headerlink\" title=\"æ•™ç¨‹\"></a>æ•™ç¨‹</h2><hr>\n<h3 id=\"ç¬¬ä¸€å°é¢˜\"><a href=\"#ç¬¬ä¸€å°é¢˜\" class=\"headerlink\" title=\"ç¬¬ä¸€å°é¢˜\"></a>ç¬¬ä¸€å°é¢˜</h3><ol>\n<li>åœ¨ linux4 ä¸Šç¼–å†™&#x2F;root&#x2F;createfile.shçš„shellè„šæœ¬ï¼Œåˆ›å»º20ä¸ªæ–‡ä»¶&#x2F;root&#x2F;shell&#x2F;file00è‡³&#x2F;root&#x2F;shell&#x2F;file19ï¼Œå¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™åˆ é™¤å†åˆ›å»ºï¼› æ¯ä¸ªæ–‡ä»¶çš„å†…å®¹åŒæ–‡ä»¶åï¼Œ å¦‚file00æ–‡ä»¶çš„å†…å®¹ä¸ºâ€œfile00â€ã€‚</li>\n</ol>\n<hr>\n<h4 id=\"1-åˆ›å»ºcreatefile-shè„šæœ¬æ–‡ä»¶\"><a href=\"#1-åˆ›å»ºcreatefile-shè„šæœ¬æ–‡ä»¶\" class=\"headerlink\" title=\"1.åˆ›å»ºcreatefile.shè„šæœ¬æ–‡ä»¶\"></a>1.åˆ›å»ºcreatefile.shè„šæœ¬æ–‡ä»¶</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /root/createfile.sh</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-å†™å…¥è„šæœ¬ä»£ç \"><a href=\"#2-å†™å…¥è„šæœ¬ä»£ç \" class=\"headerlink\" title=\"2.å†™å…¥è„šæœ¬ä»£ç \"></a>2.å†™å…¥è„šæœ¬ä»£ç </h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">!/bin/bash</span></span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">åˆ›å»ºç›®å½•</span></span><br><span class=\"line\">mkdir -p /root/shell</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">åˆ›å»ºæ–‡ä»¶</span></span><br><span class=\"line\">for i in $(seq -f &quot;%02g&quot; 0 19)</span><br><span class=\"line\">do</span><br><span class=\"line\">    file=&quot;/root/shell/file$i&quot;</span><br><span class=\"line\">    # å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™åˆ é™¤</span><br><span class=\"line\">    if [ -e $file ]; then</span><br><span class=\"line\">        rm $file</span><br><span class=\"line\">    fi</span><br><span class=\"line\">    # åˆ›å»ºæ–‡ä»¶å¹¶è®¾ç½®å†…å®¹</span><br><span class=\"line\">    echo &quot;file$i&quot; &gt; $file</span><br><span class=\"line\">done</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"ç¬¬äºŒå°é¢˜\"><a href=\"#ç¬¬äºŒå°é¢˜\" class=\"headerlink\" title=\"ç¬¬äºŒå°é¢˜\"></a>ç¬¬äºŒå°é¢˜</h3><ol start=\"2\">\n<li>ç”¨&#x2F;root&#x2F;createfile.shå‘½ä»¤æµ‹è¯•ã€‚</li>\n</ol>\n<hr>\n<h4 id=\"3-è¿è¡Œè„šæœ¬\"><a href=\"#3-è¿è¡Œè„šæœ¬\" class=\"headerlink\" title=\"3.è¿è¡Œè„šæœ¬\"></a>3.è¿è¡Œè„šæœ¬</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sh /root/createfile.sh</span><br></pre></td></tr></table></figure>\n<p><font color=\"red\"><b>æç¤ºï¼šå¦‚æœè¿è¡Œå¤±è´¥ï¼Œè¯·æ£€æŸ¥è¯¥æ–‡ä»¶æ˜¯å¦æœ‰å¯æ‰§è¡Œæƒé™ï¼Œå¦‚æœæ²¡æœ‰æƒé™å°±ç”¨å‘½ä»¤æ·»åŠ å¯æ‰§è¡Œæƒé™</b></font></p>\n<h4 id=\"4-ä¿®æ”¹æƒé™\"><a href=\"#4-ä¿®æ”¹æƒé™\" class=\"headerlink\" title=\"4.ä¿®æ”¹æƒé™\"></a>4.ä¿®æ”¹æƒé™</h4><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod +x /root/createfile.sh</span><br></pre></td></tr></table></figure>\n\n<p>+x &#x3D; ç»™äºˆè¯¥æ–‡ä»¶å¯æ‰§è¡Œæƒé™</p>\n<p>æƒé™ç¼–å·è¯´æ˜ï¼š</p>\n<p>drwxr-xr-x  \troot\troot\t<a href=\"http://xxxxxxx.sh/\">XXXXXXX.sh</a></p>\n<table>\n<thead>\n<tr>\n<th>drwx</th>\n<th>r-x</th>\n<th>r-x</th>\n<th>root</th>\n<th>root</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>æ‰€å±ç”¨æˆ·</td>\n<td>æ‰€å±ç»„</td>\n<td>å…¶ä»–ç”¨æˆ·å’Œç»„</td>\n<td>æ‰€å±ç”¨æˆ·</td>\n<td>æ‰€å±ç»„</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>d</td>\n<td>è¡¨ç¤ºè¿™æ˜¯ç›®å½•</td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>r</td>\n<td>å†™</td>\n<td>æƒé™ç¼–å· 4</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>w</td>\n<td>è¯»</td>\n<td>æƒé™ç¼–å· 2</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>x</td>\n<td>æ‰§è¡Œ</td>\n<td>æƒé™ç¼–å· 1</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n",
            "tags": [
                "åšå®¢",
                "èŒä¸šæŠ€èƒ½å¤§èµ›",
                "æ•™ç¨‹"
            ]
        }
    ]
}